<!DOCTYPE html>
<html lang="tr">
<head>
    <meta charset="UTF-8">
    <title>CodEditor | V25 ULTRA MASTER</title>
    <script src="https://cdn.jsdelivr.net/pyodide/v0.23.4/full/pyodide.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/ace/1.23.0/ace.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/ace/1.23.0/ext-language_tools.min.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.1.3/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.1.3/firebase-database-compat.js"></script>
    <style>
        :root { --accent: #00ff41; --bg: #000; --owner: #ff00c8; --member: #00d4ff; --warn: #ffcc00; --error: #ff4444; --py-blue: #3776ab; }
        body { margin: 0; background: var(--bg); color: white; font-family: 'Courier New', monospace; overflow: hidden; height: 100vh; display: flex; flex-direction: column; }
        
        /* RGB √áER√áEVE */
        body::before { content: ""; position: fixed; inset: 0; z-index: 9999; pointer-events: none; border: 3px solid; border-image: linear-gradient(90deg, #f00, #48ff00, #002bff, #ff00c8) 1; animation: borderRotate 6s linear infinite; }
        @keyframes borderRotate { 0% { filter: hue-rotate(0deg); } 100% { filter: hue-rotate(360deg); } }

        /* Gƒ∞Rƒ∞≈û EKRANI & SARI KURALLAR */
        #auth-screen { position: fixed; inset: 0; background: #000; z-index: 10000; display: flex; justify-content: center; align-items: center; }
        .auth-box { border: 2px solid var(--accent); padding: 40px; width: 480px; text-align: center; background: #050505; border-radius: 15px; box-shadow: 0 0 30px rgba(0,255,65,0.2); }
        .system-warning { color: var(--warn); font-size: 11px; border: 1px dashed var(--warn); padding: 15px; margin-bottom: 20px; text-align: left; background: rgba(255, 204, 0, 0.05); line-height: 1.6; }
        .auth-input { width: 100%; padding: 12px; margin-bottom: 12px; background: #111; border: 1px solid #333; color: var(--accent); outline: none; border-radius: 8px; box-sizing: border-box; }
        .auth-btn { width: 100%; padding: 15px; background: var(--accent); color: black; border: none; border-radius: 8px; font-weight: bold; cursor: pointer; transition: 0.3s; text-transform: uppercase; }

        /* HEADER */
        header { padding: 12px 25px; background: #080808; border-bottom: 1px solid #1a1a1a; display: flex; justify-content: space-between; align-items: center; z-index: 1000; }
        .nav-btn { background: #111; color: var(--accent); border: 1px solid var(--accent); padding: 8px 15px; border-radius: 5px; cursor: pointer; font-weight: bold; font-size: 12px; }

        /* TERMINAL & REHBER */
        #python-console { position: absolute; bottom: 70px; left: 350px; width: 550px; height: 280px; background: rgba(0,0,0,0.95); border: 2px solid var(--py-blue); border-radius: 10px; z-index: 5000; display: none; flex-direction: column; }
        #py-header { background: var(--py-blue); color: white; padding: 10px; font-weight: bold; display: flex; justify-content: space-between; cursor: move; }
        #py-output { flex: 1; overflow-y: auto; padding: 15px; font-size: 13px; color: #00ff41; white-space: pre-wrap; }
        
        #guide-panel { position: fixed; left: -350px; top: 0; width: 320px; height: 100%; background: #080808; border-right: 2px solid var(--accent); z-index: 10005; transition: 0.4s; padding: 25px; overflow-y: auto; }
        #guide-panel.open { left: 0; }

        /* MAIN STYLES */
        #main-container { display: flex; flex: 1; overflow: hidden; position: relative; }
        #editor { flex: 1; font-size: 16px; background: #000 !important; }
        #sidebar { width: 320px; background: #050505; border-left: 1px solid #1a1a1a; display: flex; flex-direction: column; padding: 15px; }
        #chat-box { flex: 1; overflow-y: auto; font-size: 11px; margin-bottom: 10px; padding: 10px; background: #020202; border-radius: 8px; border: 1px solid #111; }
        
        .run-btn { background: var(--py-blue); color: white; border: none; padding: 8px 20px; border-radius: 5px; cursor: pointer; font-weight: bold; display: none; }
        .rgb-marquee { background: #050505; border-top: 1px solid #1a1a1a; height: 35px; display: flex; align-items: center; overflow: hidden; }
        #marquee-wrap { display: flex; white-space: nowrap; animation: marquee-flow 25s linear infinite; }
        .rgb-item { font-size: 13px; font-weight: 900; padding: 0 60px; animation: rgb-rainbow 6s linear infinite; }
        @keyframes marquee-flow { from { transform: translateX(0); } to { transform: translateX(-50%); } }
        @keyframes rgb-rainbow { 0% { color: #f00; } 50% { color: #0df; } 100% { color: #f00; } }
    </style>
</head>
<body>

<div id="auth-screen">
    <div class="auth-box">
        <div style="color:var(--accent); margin-bottom:15px; font-weight:bold; font-size: 24px;">[ PREM_EDITION_V25 ]</div>
        <div class="system-warning">
            <b style="color:var(--warn)">[ SARI KURALLAR / YELLOW RULES ]</b><br><br>
            ‚Ä¢ Instagram: <b>@rw_f00t</b><br>
            ‚Ä¢ <b>Aynƒ± kullanƒ±cƒ± adƒ±yla farklƒ± hesaplar a√ßƒ±labilir.</b><br>
            ‚Ä¢ <b>Chat 10 dakikada bir resetlenir.</b><br>
            ‚Ä¢ <b>Python V25 Engine & Akƒ±llƒ± ƒ∞ndirme Aktif.</b>
        </div>
        <input type="text" id="user-name" class="auth-input" placeholder="KULLANICI ADI">
        <input type="password" id="user-pass" class="auth-input" placeholder="≈ûƒ∞FRE">
        <button class="auth-btn" onclick="handleAuth()">Sƒ∞STEMƒ∞ BA≈ûLAT</button>
    </div>
</div>

<div id="guide-panel">
    <h3 style="color:var(--accent)">Dƒ∞L REHBERƒ∞</h3>
    <div style="background:#111; padding:10px; border-radius:5px; margin-bottom:10px;">
        <h4 style="color:var(--accent); margin-top:0;">PYTHON</h4>
        <code>print("Merhaba Berk!")</code>
    </div>
    <button class="nav-btn" onclick="toggleGuide()">REHBERƒ∞ KAPAT</button>
</div>

<header>
    <div style="color:var(--accent); font-weight:bold; font-size:18px;">> KERNEL_ULTRA_V25</div>
    <div style="display: flex; gap: 10px; align-items: center;">
        <button class="nav-btn" onclick="toggleGuide()">‚ùì REHBER</button>
        <button id="run-py-btn" class="run-btn" onclick="runPython()">‚ñ∂ √áALI≈ûTIR</button>
        <button id="dl-btn" class="nav-btn" style="border-color:var(--warn); color:var(--warn);" onclick="exportFile()">üì• ƒ∞NDƒ∞R (.py)</button>
        <select id="lang-select" onchange="changeLanguage()" style="background:#000; color:var(--accent); border:1px solid var(--accent); padding: 5px;">
            <option value="python">Python</option>
            <option value="javascript">JavaScript</option>
            <option value="html">HTML</option>
            <option value="css">CSS</option>
        </select>
    </div>
</header>

<div id="main-container">
    <div id="editor">print("V25 Beast Edition Aktif!")
# Tum hacker arayuzu ve sari kurallar geri dondu.</div>

    <div id="python-console">
        <div id="py-header"><span>PYTHON TERMINAL</span><span onclick="closePy()" style="cursor:pointer;">[X]</span></div>
        <div id="py-output">Motor yukleniyor...</div>
    </div>

    <div id="sidebar">
        <div id="chat-box"></div>
        <input type="text" id="chat-input" class="auth-input" style="margin:0;" placeholder="Mesaj yaz...">
    </div>
</div>

<div class="rgb-marquee"><div id="marquee-wrap"></div></div>

<script>
    // Fƒ∞REBASE KONFƒ∞G√úRASYONU
    const firebaseConfig = { apiKey: "AIzaSyDpaFcKI6XhYuWCiyZHUFey0T6uqKy8IPA", authDomain: "prem-d18e3.firebaseapp.com", databaseURL: "https://prem-d18e3-default-rtdb.firebaseio.com", projectId: "prem-d18e3", storageBucket: "prem-d18e3.firebasestorage.app", messagingSenderId: "828611092580", appId: "1:828611092580:web:5f8e2c7c501c63a2d73f71" };
    firebase.initializeApp(firebaseConfig); const db = firebase.database();

    // PYTHON MOTORU
    let pyodideInstance = null;
    async function initPython() {
        pyodideInstance = await loadPyodide();
        document.getElementById("py-output").innerText = "Python Hazƒ±r. Kodunu yaz ve '√áALI≈ûTIR'a bas.\n";
        document.getElementById("run-py-btn").style.display = "block";
    }
    initPython();

    const editor = ace.edit("editor");
    editor.setTheme("ace/theme/terminal");
    editor.session.setMode("ace/mode/python");

    const extensions = { python: ".py", javascript: ".js", html: ".html", css: ".css" };

    function changeLanguage() {
        const l = document.getElementById("lang-select").value;
        editor.session.setMode("ace/mode/" + l);
        document.getElementById("run-py-btn").style.display = (l === 'python') ? 'block' : 'none';
        document.getElementById("dl-btn").innerText = `üì• ƒ∞NDƒ∞R (${extensions[l] || ".txt"})`;
    }

    async function handleAuth() {
        const u = document.getElementById("user-name").value;
        const p = document.getElementById("user-pass").value;
        if(u && p) {
            document.getElementById("auth-screen").style.display = "none";
            // Chat ve online sistemini burada baslatabilirsiniz
        }
    }

    function exportFile() {
        const l = document.getElementById("lang-select").value;
        const blob = new Blob([editor.getValue()], {type: "text/plain"});
        const a = document.createElement("a");
        a.href = URL.createObjectURL(blob);
        a.download = "kod_kaydi" + (extensions[l] || ".txt");
        a.click();
    }

    async function runPython() {
        document.getElementById("python-console").style.display = "flex";
        const out = document.getElementById("py-output");
        out.innerText = "Sistem ƒ∞≈üliyor...\n";
        try {
            await pyodideInstance.runPythonAsync(`import sys, io\nsys.stdout = io.StringIO()`);
            await pyodideInstance.runPythonAsync(editor.getValue());
            out.innerText = pyodideInstance.runPython("sys.stdout.getvalue()") || "ƒ∞≈ülem Tamamlandƒ± (√áƒ±ktƒ± Yok).";
        } catch (e) { out.innerText = "Sƒ∞STEM HATASI: " + e; }
    }

    function toggleGuide() { document.getElementById('guide-panel').classList.toggle('open'); }
    function closePy() { document.getElementById("python-console").style.display = "none"; }
    db.ref("system/marquee").on("value", (s) => { document.getElementById("marquee-wrap").innerHTML = `<span class="rgb-item">${s.val() || "SYSTEM ONLINE | @RW_F00T"}</span>`.repeat(6); });
</script>
</body>
</html>
