<!DOCTYPE html>
<html lang="tr">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="Cache-Control" content="no-cache, no-store, must-revalidate">
    <title>CodEditor | V36 SECURE ARCHITECT</title>
    
    <script src="https://cdn.jsdelivr.net/pyodide/v0.23.4/full/pyodide.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/ace/1.23.0/ace.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/ace/1.23.0/ext-language_tools.min.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.1.3/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.1.3/firebase-database-compat.js"></script>

    <style>
        :root {
            --theme: #00d4ff; /* √úye Mavisi */
            --bg: #030303;
            --panel: #0a0a0a;
            --accent: #ffcc00;
            --font: 'Courier New', monospace;
        }

        /* ADMIN MODU (YE≈ûƒ∞L) */
        body.root-access { --theme: #00ff41; }

        body, html { margin: 0; padding: 0; background: var(--bg); color: #eee; font-family: var(--font); height: 100vh; overflow: hidden; }

        /* RGB Sƒ∞STEM √áER√áEVESƒ∞ */
        .sys-frame {
            position: fixed; inset: 0; pointer-events: none; z-index: 9999;
            border: 3px solid var(--theme); transition: 0.8s;
            box-shadow: inset 0 0 15px rgba(0,0,0,0.5);
        }

        /* Gƒ∞Rƒ∞≈û EKRANI */
        #auth-gate {
            position: fixed; inset: 0; background: #000; z-index: 10000;
            display: flex; justify-content: center; align-items: center;
        }
        .gate-box {
            width: 500px; padding: 40px; background: var(--panel); border: 2px solid var(--theme);
            border-radius: 15px; text-align: center; box-shadow: 0 0 40px rgba(0,0,0,1);
        }
        .yellow-alert {
            border: 1px dashed var(--accent); color: var(--accent); padding: 15px;
            font-size: 12px; margin-bottom: 20px; text-align: left; background: rgba(255,204,0,0.03);
        }

        .gate-input {
            width: 100%; padding: 15px; margin-bottom: 10px; background: #000;
            border: 1px solid #222; color: var(--theme); font-weight: bold; outline: none;
        }
        .gate-btn {
            width: 100%; padding: 15px; background: var(--theme); color: #000;
            border: none; font-weight: 900; cursor: pointer; transition: 0.3s;
        }

        /* HEADER */
        header {
            height: 60px; background: #050505; border-bottom: 2px solid var(--theme);
            display: flex; align-items: center; justify-content: space-between; padding: 0 20px;
        }
        .badge { background: var(--theme); color: #000; padding: 4px 10px; font-weight: 900; font-size: 10px; border-radius: 3px; }

        /* MAIN LAYOUT */
        main { display: grid; grid-template-columns: 220px 1fr 350px; height: calc(100vh - 100px); }

        /* LOGS */
        .side-logs { background: #000; border-right: 1px solid #111; padding: 10px; font-size: 10px; color: #444; overflow-y: auto; }
        .log-line b { color: var(--theme); }

        /* EDITOR */
        #editor-container { position: relative; }
        #editor { width: 100%; height: 100%; font-size: 14px; }

        /* CHAT & AI PANEL */
        .side-tools { background: #080808; border-left: 1px solid #111; display: flex; flex-direction: column; }
        
        #chat-area { flex: 2; display: flex; flex-direction: column; padding: 10px; border-bottom: 1px solid #111; }
        .chat-msgs { flex: 1; background: #000; border: 1px solid #1a1a1a; margin-bottom: 8px; overflow-y: auto; padding: 8px; font-size: 12px; }
        
        #ai-area { flex: 1.2; padding: 10px; background: #040008; display: flex; flex-direction: column; }
        .ai-text { flex: 1; color: #b080ff; font-size: 11px; font-style: italic; overflow-y: auto; margin-bottom: 5px; border-left: 2px solid #b080ff; padding-left: 5px; }

        .inp-grp { display: flex; gap: 4px; }
        .mini-inp { flex: 1; background: #000; border: 1px solid #222; color: #fff; padding: 8px; font-size: 11px; outline: none; }
        .mini-btn { background: var(--theme); border: none; padding: 0 12px; cursor: pointer; font-weight: bold; }

        /* TERMINAL */
        #term {
            position: absolute; bottom: 0; left: 0; right: 0; height: 180px;
            background: rgba(0,0,0,0.95); border-top: 2px solid var(--theme);
            display: none; flex-direction: column; z-index: 100;
        }
        .term-head { background: var(--theme); color: #000; padding: 5px 10px; font-weight: bold; display: flex; justify-content: space-between; font-size: 12px; }
        #term-out { flex: 1; padding: 10px; color: var(--theme); overflow-y: auto; font-family: monospace; font-size: 13px; }

        /* REHBER */
        #guide {
            position: fixed; top: 0; right: -400px; width: 350px; height: 100%;
            background: #0a0a0a; border-left: 3px solid var(--theme); z-index: 5000;
            transition: 0.5s; padding: 30px; box-shadow: -20px 0 50px #000;
        }
        #guide.open { right: 0; }

        footer { height: 40px; background: #000; border-top: 1px solid #111; display: flex; align-items: center; overflow: hidden; }
        .scroll-msg { animation: scroll 25s linear infinite; white-space: nowrap; color: var(--theme); font-weight: 900; font-size: 13px; }
        @keyframes scroll { 0% { transform: translateX(100%); } 100% { transform: translateX(-100%); } }
    </style>
</head>
<body id="sys-body">

<div class="sys-frame"></div>

<div id="auth-gate">
    <div class="gate-box">
        <h2 style="color:var(--theme); margin:0 0 10px 0;">V36 SECURE KERNEL</h2>
        <div class="yellow-alert">
            <b>[ G√úVENLƒ∞K PROTOKOL√ú ]</b><br>
            ‚Ä¢ Admin: <b>@rw_f00t</b> (≈ûifre g√ºncellendi!)<br>
            ‚Ä¢ √úyeler: ƒ∞sim yazƒ±p ≈üifreyi bo≈ü bƒ±rakabilir.<br>
            ‚Ä¢ T√ºm √∂zellikler (AI, Rehber, Python) herkese a√ßƒ±ktƒ±r.
        </div>
        <input type="text" id="in-user" class="gate-input" placeholder="KOD ADI">
        <input type="password" id="in-pass" class="gate-input" placeholder="G√úVENLƒ∞K ≈ûƒ∞FRESƒ∞">
        <button class="gate-btn" onclick="checkAuth()">Sƒ∞STEME BAƒûLAN</button>
        <div id="auth-info" style="margin-top:10px; font-size:11px; color:#444;">Motor bekleniyor...</div>
    </div>
</div>

<div id="guide">
    <h3 style="color:var(--theme)">Sƒ∞STEM REHBERƒ∞</h3>
    <div style="font-size:12px; line-height:1.8; color:#888;">
        <p><b>- Python:</b> Sadece Python se√ßiliyken √áALI≈ûTIR butonu g√∂r√ºn√ºr.</p>
        <p><b>- AI:</b> Saƒü alttaki panelden kod analizi isteyebilirsiniz.</p>
        <p><b>- Chat:</b> Global mesajla≈üma t√ºm kullanƒ±cƒ±lar i√ßindir.</p>
        <p><b>- ƒ∞ndir:</b> Yazdƒ±ƒüƒ±nƒ±z kodu se√ßili dile g√∂re bilgisayara kaydeder.</p>
    </div>
    <button class="gate-btn" onclick="toggleGuide()" style="margin-top:20px;">KAPAT</button>
</div>

<header>
    <div style="display:flex; align-items:center; gap:15px;">
        <b style="color:var(--theme)">ROOT_V36</b>
        <span id="u-tag" class="badge">INIT...</span>
    </div>
    <div style="display:flex; gap:8px;">
        <button class="mini-btn" style="height:35px; color:black;" onclick="toggleGuide()">‚ùì REHBER</button>
        <select id="l-sel" class="mini-inp" onchange="updL()" style="width:100px;">
            <option value="python">Python</option>
            <option value="javascript">JS</option>
            <option value="html">HTML</option>
            <option value="c_cpp">C++</option>
        </select>
        <button id="r-btn" class="mini-btn" style="display:none; background:#fff;" onclick="run()">‚ñ∂ RUN</button>
        <button class="mini-btn" style="background:var(--accent);" onclick="dl()">üì• ƒ∞NDƒ∞R</button>
    </div>
</header>

<main>
    <div id="log-side" class="side-logs"><div class="log-line"><b>[SYS]</b> Boot sequence...</div></div>
    
    <div id="editor-container">
        <div id="editor"># V36 SECURE EDITION
# ≈ûifre Koruma: AKTƒ∞F
# Rol Eri≈üimi: TAM ERƒ∞≈ûƒ∞M

print("Sistem g√ºvenli ≈üekilde ba≈ülatƒ±ldƒ±.")</div>
        <div id="term">
            <div class="term-head"><span>TERMINAL_OUTPUT</span><span onclick="toggleT(false)" style="cursor:pointer;">[X]</span></div>
            <pre id="term-out"></pre>
        </div>
    </div>

    <div class="side-tools">
        <div id="chat-area">
            <b style="color:var(--theme); font-size:11px; margin-bottom:5px;">GLOBAL_CHAT</b>
            <div id="chat-box" class="chat-msgs"></div>
            <div class="inp-grp">
                <input type="text" id="chat-in" class="mini-inp" placeholder="Mesaj...">
                <button class="mini-btn" onclick="send()">></button>
            </div>
        </div>
        <div id="ai-area">
            <b style="color:#b080ff; font-size:11px; margin-bottom:5px;">AI_ASSISTANT</b>
            <div id="ai-out" class="ai-text">AI: Kod hakkƒ±nda sorun varsa buradayƒ±m.</div>
            <div class="inp-grp">
                <input type="text" id="ai-in" class="mini-inp" placeholder="AI'ya sor..." onkeypress="if(event.key=='Enter')ask()">
                <button class="mini-btn" style="background:#b080ff;" onclick="ask()">?</button>
            </div>
        </div>
    </div>
</main>

<footer>
    <div class="scroll-msg">+++ SECURITY LEVEL: HIGH +++ ENCRYPTION: ACTIVE +++ ALL USERS: FULL ACCESS +++ INSTAGRAM: @RW_F00T +++ V36 UPDATE READY +++</div>
</footer>

<script>
    // F-Config
    const fc = { apiKey: "AIzaSyDpaFcKI6XhYuWCiyZHUFey0T6uqKy8IPA", authDomain: "prem-d18e3.firebaseapp.com", databaseURL: "https://prem-d18e3-default-rtdb.firebaseio.com", projectId: "prem-d18e3", storageBucket: "prem-d18e3.firebasestorage.app", messagingSenderId: "828611092580", appId: "1:828611092580:web:5f8e2c7c501c63a2d73f71" };
    firebase.initializeApp(fc); const db = firebase.database();

    let py = null;
    let user = "Guest";
    const ed = ace.edit("editor");
    ed.setTheme("ace/theme/terminal");
    ed.session.setMode("ace/mode/python");

    async function init() {
        try { py = await loadPyodide(); document.getElementById("r-btn").style.display="block"; document.getElementById("auth-info").innerText="Baƒülantƒ± Kurulabilir."; document.getElementById("auth-info").style.color="#0f0"; } 
        catch(e) { console.error(e); }
    }
    init();

    function checkAuth() {
        const u = document.getElementById("in-user").value;
        const p = document.getElementById("in-pass").value;
        if(!u) return alert("ƒ∞sim yaz!");

        // G√ºvenli ≈ûifre Kontrol√º (f00t_99x_Root!)
        if(u === "@rw_f00t" && p === "f00t_99x_Root!") {
            document.getElementById("sys-body").classList.add("root-access");
            document.getElementById("u-tag").innerText = "ROOT ADMIN";
            user = "@rw_f00t";
        } else {
            document.getElementById("u-tag").innerText = "MEMBER";
            user = u;
        }
        document.getElementById("auth-gate").style.display="none";
        log("Baƒülantƒ± kuruldu: " + user);
    }

    function log(m) {
        const l = document.getElementById("log-side");
        l.innerHTML = `<div class="log-line"><b>[${new Date().toLocaleTimeString()}]</b> ${m}</div>` + l.innerHTML;
    }

    async function run() {
        toggleT(true); const o = document.getElementById("term-out"); o.innerText = "Running...";
        try {
            await py.runPythonAsync(`import sys, io\nsys.stdout = io.StringIO()`);
            await py.runPythonAsync(ed.getValue());
            o.innerText = py.runPython("sys.stdout.getvalue()") || "Done (No Output).";
        } catch(e) { o.innerText = "Error: " + e; }
    }

    function send() {
        const i = document.getElementById("chat-in");
        if(i.value) { db.ref("global_chat").push({ u: user, m: i.value, t: Date.now() }); i.value=""; }
    }

    db.ref("global_chat").limitToLast(15).on("value", s => {
        const b = document.getElementById("chat-box"); b.innerHTML = "";
        s.forEach(c => { const d = c.val(); b.innerHTML += `<div><b style="color:${d.u=='@rw_f00t'?'#0f0':'#0cf'}">${d.u}:</b> ${d.m}</div>`; });
        b.scrollTop = b.scrollHeight;
    });

    function ask() {
        const i = document.getElementById("ai-in"); const o = document.getElementById("ai-out");
        if(!i.value) return;
        o.innerText = "AI d√º≈ü√ºn√ºyor...";
        setTimeout(() => {
            const t = i.value.toLowerCase();
            if(t.includes("hata")) o.innerText = "AI: Kodun yapƒ±sƒ±nƒ± ve girintileri kontrol etmelisin.";
            else if(t.includes("merhaba")) o.innerText = "AI: Merhaba! Sana nasƒ±l yardƒ±mcƒ± olabilirim?";
            else o.innerText = "AI: Bu isteƒüin V37 g√ºncellemesiyle aktifle≈üecek.";
            i.value = "";
        }, 1000);
    }

    function toggleT(s) { document.getElementById("term").style.display = s ? "flex" : "none"; }
    function toggleGuide() { document.getElementById("guide").classList.toggle("open"); }
    function updL() { const l = document.getElementById("l-sel").value; ed.session.setMode("ace/mode/"+l); document.getElementById("r-btn").style.display = (l=="python"?"block":"none"); }
    function dl() { const b = new Blob([ed.getValue()], {type:"text/plain"}); const a = document.createElement("a"); a.href=URL.createObjectURL(b); a.download="code_"+Date.now()+".txt"; a.click(); }
</script>
</body>
</html>
