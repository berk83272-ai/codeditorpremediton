<!DOCTYPE html>
<html lang="tr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>CodEditor V42 | ABSOLUTE OVERLORD</title>
    
    <script src="https://cdn.jsdelivr.net/pyodide/v0.23.4/full/pyodide.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/ace/1.23.0/ace.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/ace/1.23.0/ext-language_tools.min.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.1.3/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.1.3/firebase-database-compat.js"></script>

    <style>
        /* ==============================================
           SÄ°STEM GENETÄ°ÄžÄ° VE DÄ°NAMÄ°K CSS
           ============================================== */
        :root {
            --primary: #00d4ff; 
            --admin-neon: #00ff41;
            --bg-deep: #020202;
            --bg-img: url('https://images.unsplash.com/photo-1550745165-9bc0b252726f?q=80&w=2070');
            --bg-color: #020202;
            --bg-panel: rgba(10, 10, 10, 0.9);
            --text-main: #e0e0e0;
            --danger: #ff003c;
            --warning: #ffcc00;
            --ai-purple: #b080ff;
        }

        /* GÃœVENLÄ°K: SEÃ‡Ä°M VE KOPYALAMA YASAK */
        * {
            box-sizing: border-box;
            outline: none;
            -webkit-user-select: none;
            user-select: none;
            cursor: default;
        }

        /* SADECE EDÄ°TÃ–R VE INPUTLARDA SEÃ‡Ä°ME Ä°ZÄ°N VER */
        #ace-editor, input, textarea, #term-body, .selectable {
            -webkit-user-select: text !important;
            user-select: text !important;
            cursor: text;
        }

        body, html {
            margin: 0; padding: 0; height: 100vh; width: 100vw;
            background: var(--bg-img) center center / cover no-repeat fixed var(--bg-color);
            color: var(--text-main); font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            overflow: hidden; display: flex; flex-direction: column;
            transition: background 0.5s ease;
        }

        /* SÄ°STEM Ã‡ERÃ‡EVESÄ° */
        .sys-frame {
            position: fixed; inset: 0; border: 4px solid var(--primary);
            pointer-events: none; z-index: 10000; transition: border-color 0.8s;
            box-shadow: inset 0 0 100px rgba(0,0,0,0.8);
        }

        /* --- [ LOGIN GATE ] --- */
        #auth-gate {
            position: fixed; inset: 0; background: #000; z-index: 20000;
            display: flex; justify-content: center; align-items: center;
        }
        .gate-card {
            width: 500px; padding: 50px; background: #0a0a0a; border: 2px solid var(--primary);
            border-radius: 20px; text-align: center; box-shadow: 0 0 50px var(--primary);
        }
        .gate-input {
            width: 100%; padding: 15px; margin-bottom: 15px; background: #000;
            border: 1px solid #333; color: #fff; border-radius: 8px;
        }
        .gate-btn {
            width: 100%; padding: 15px; background: var(--primary); color: #000;
            border: none; font-weight: 900; border-radius: 8px; cursor: pointer;
        }

        /* --- [ HEADER ] --- */
        header {
            height: 70px; background: rgba(0,0,0,0.9); backdrop-filter: blur(10px);
            border-bottom: 1px solid var(--primary); display: flex;
            align-items: center; justify-content: space-between; padding: 0 30px; z-index: 5000;
        }
        .nav-btn {
            background: rgba(255,255,255,0.05); color: var(--primary); border: 1px solid var(--primary);
            padding: 8px 16px; border-radius: 4px; font-weight: bold; cursor: pointer; margin-left: 10px;
        }
        .nav-btn:hover { background: var(--primary); color: #000; }
        .admin-btn { background: var(--danger); color: #fff; border: none; display: none; }

        /* --- [ ANA ALAN ] --- */
        main { display: grid; grid-template-columns: 260px 1fr 350px; flex: 1; overflow: hidden; }

        .log-panel { background: rgba(0,0,0,0.8); border-right: 1px solid #1a1a1a; padding: 20px; overflow-y: auto; }
        .log-line { font-size: 11px; color: #666; margin-bottom: 5px; border-left: 2px solid var(--primary); padding-left: 8px; }

        #editor-container { position: relative; background: transparent; }
        #ace-editor { width: 100%; height: 100%; background: transparent !important; font-size: 16px; }

        #terminal-box {
            position: absolute; bottom: 0; width: 100%; height: 240px;
            background: rgba(0,0,0,0.95); border-top: 3px solid var(--primary);
            display: none; flex-direction: column; z-index: 1500;
        }

        /* --- [ DEV ADMÄ°N MODAL ] --- */
        #admin-panel {
            position: fixed; top: 50%; left: 50%; transform: translate(-50%, -50%);
            width: 950px; height: 750px; background: rgba(5,5,5,0.98); border: 3px solid var(--admin-neon);
            z-index: 30000; display: none; flex-direction: column; padding: 40px; border-radius: 20px;
            backdrop-filter: blur(20px); box-shadow: 0 0 100px rgba(0,255,65,0.2);
        }
        .admin-grid { display: grid; grid-template-columns: 1fr 1fr; gap: 30px; margin-top: 20px; }
        .adm-card { background: #111; border: 1px solid #222; padding: 20px; border-radius: 12px; }

        /* FOOTER */
        footer { height: 40px; background: #000; border-top: 1px solid #111; display: flex; align-items: center; overflow: hidden; }
        .ticker { white-space: nowrap; animation: ticker-move 30s linear infinite; color: var(--primary); font-weight: bold; font-size: 12px; }
        @keyframes ticker-move { 0% { transform: translateX(100%); } 100% { transform: translateX(-100%); } }

        /* SEÃ‡Ä°LEBÄ°LÄ°R ALANLAR Ä°Ã‡Ä°N */
        .selectable { cursor: text; }

    </style>
</head>
<body id="main-body">

<div class="sys-frame"></div>

<div id="auth-gate">
    <div class="gate-card">
        <h1 style="color:var(--primary); margin:0;">V42 INTEGRATION</h1>
        <p style="color:#444; font-size:12px; letter-spacing:2px;">SECURE ACCESS POINT</p>
        <div style="background:rgba(255,0,0,0.05); border:1px dashed var(--danger); padding:15px; margin:20px 0; font-size:12px; color:var(--danger); text-align:left;">
            <b>GÄ°RÄ°Åž NOTLARI:</b><br>
            â€¢ Admin ID: @rw_f00t<br>
            â€¢ Admin Key: f00t_99x_Root!<br>
            â€¢ GÃ¼venlik seviyesi: KRÄ°TÄ°K.
        </div>
        <input type="text" id="login-id" class="gate-input" placeholder="KullanÄ±cÄ± KimliÄŸi">
        <input type="password" id="login-key" class="gate-input" placeholder="EriÅŸim AnahtarÄ±">
        <button class="gate-btn" onclick="startSystem()">SÄ°STEMÄ° BAÅžLAT</button>
    </div>
</div>

<div id="admin-panel">
    <div style="display:flex; justify-content:space-between; align-items:center;">
        <h1 style="color:var(--admin-neon); margin:0;">â™› OVERLORD COMMAND CENTER</h1>
        <button class="nav-btn" style="border-color:red; color:red;" onclick="toggleAdmin()">KAPAT</button>
    </div>

    <div class="admin-grid">
        <div class="adm-card">
            <h3 style="color:var(--admin-neon);">GÃ–RÃœNÃœM YÃ–NETÄ°MÄ°</h3>
            <label style="font-size:12px; color:#666;">Arka Plan Resim URL:</label>
            <input type="text" id="adm-bg-url" class="gate-input" style="padding:10px; margin-top:5px;" placeholder="https://resim-linki.jpg">
            
            <label style="font-size:12px; color:#666;">Sistem Neon Rengi:</label>
            <input type="color" id="adm-color-picker" style="width:100%; height:40px; background:none; border:none; cursor:pointer;">
            
            <button class="gate-btn" style="margin-top:15px; background:var(--admin-neon);" onclick="updateAppearance()">AYARLARI UYGULA</button>
        </div>

        <div class="adm-card">
            <h3 style="color:var(--warning);">SÄ°STEM YÃ–NETÄ°MÄ°</h3>
            <div style="display:flex; flex-direction:column; gap:10px;">
                <button class="nav-btn" style="margin:0;" onclick="toggleLockdown()">LOCKDOWN: <span id="lock-text">PASÄ°F</span></button>
                <button class="nav-btn" style="margin:0;" onclick="clearLogs()">SÄ°STEM LOGLARINI SÄ°L</button>
                <button class="nav-btn" style="margin:0; border-color:var(--danger); color:var(--danger);" onclick="location.reload()">SÄ°STEMÄ° YENÄ°DEN BAÅžLAT</button>
            </div>
        </div>
    </div>

    <div class="adm-card" style="margin-top:20px;">
        <h3 style="color:var(--danger);">KÃœRESEL DUYURU SÄ°STEMÄ°</h3>
        <textarea id="adm-broadcast" class="gate-input selectable" style="height:80px;" placeholder="TÃ¼m kullanÄ±cÄ±lara mesaj gÃ¶nder..."></textarea>
        <button class="gate-btn" style="background:var(--danger); color:#fff;" onclick="sendBroadcast()">DUYURUYU YAYINLA</button>
    </div>
</div>

<header>
    <div style="display:flex; align-items:center; gap:20px;">
        <span style="font-size:24px; font-weight:900; color:var(--primary); letter-spacing:3px;">SYSTEM_V42</span>
        <span id="role-badge" style="background:#222; font-size:10px; padding:4px 10px; border-radius:10px;">UNVERIFIED</span>
    </div>
    <div style="display:flex;">
        <button id="admin-trigger" class="nav-btn admin-btn" onclick="toggleAdmin()">â™› ADMIN PANEL</button>
        <select id="lang-select" class="nav-btn" onchange="changeLanguage()">
            <option value="python">Python 3.11</option>
            <option value="javascript">JavaScript</option>
            <option value="html">HTML5</option>
            <option value="css">CSS3</option>
        </select>
        <button id="run-btn" class="nav-btn" style="background:var(--primary); color:#000; display:none;" onclick="executeCode()">â–¶ Ã‡ALIÅžTIR</button>
        <button class="nav-btn" style="border-color:var(--warning); color:var(--warning);" onclick="downloadCode()">ðŸ“¥ KAYDET</button>
    </div>
</header>

<main>
    <div class="log-panel" id="log-view">
        <div class="log-line"><b>[SYS]</b> Kernel initialization...</div>
    </div>

    <div id="editor-container">
        <div id="ace-editor"># V42 ABSOLUTE EDITION
# TÃ¼m diller ve Admin Panel aktif.
# Admin: @rw_f00t

print("Sistem hazÄ±r. Kodlama baÅŸlayabilir.")</div>
        
        <div id="terminal-box">
            <div style="background:var(--primary); color:#000; padding:8px 20px; font-weight:900; display:flex; justify-content:space-between;">
                <span>STDOUT_CONSOLE</span>
                <span onclick="toggleTerm(false)" style="cursor:pointer;">[X]</span>
            </div>
            <div id="term-body" class="selectable" style="flex:1; padding:20px; color:var(--primary); overflow-y:auto; font-family:monospace; font-size:15px;"></div>
        </div>
    </div>

    <div style="background:rgba(8,8,8,0.95); border-left:1px solid #111; display:flex; flex-direction:column;">
        <div style="flex:1; padding:20px; display:flex; flex-direction:column; border-bottom:1px solid #111;">
            <b style="font-size:12px; color:var(--primary); margin-bottom:10px;">GLOBAL NETWORK CHAT</b>
            <div id="chat-stream" class="selectable" style="flex:1; background:#000; border:1px solid #222; padding:10px; font-size:12px; overflow-y:auto; margin-bottom:10px;"></div>
            <div style="display:flex; gap:5px;">
                <input type="text" id="chat-input" class="gate-input selectable" style="margin:0; padding:8px;" placeholder="Mesaj...">
                <button class="nav-btn" style="margin:0;" onclick="sendChatMessage()">></button>
            </div>
        </div>
        <div style="flex:1; padding:20px; display:flex; flex-direction:column;">
            <b style="font-size:12px; color:var(--ai-purple); margin-bottom:10px;">AI ASSISTANT</b>
            <div id="ai-stream" class="selectable" style="flex:1; background:#000; border:1px solid var(--ai-purple); padding:10px; font-size:12px; color:var(--ai-purple); overflow-y:auto; margin-bottom:10px;">AI: Herhangi bir dilde kod sorabilirsin.</div>
            <div style="display:flex; gap:5px;">
                <input type="text" id="ai-input" class="gate-input selectable" style="margin:0; padding:8px; border-color:var(--ai-purple);" placeholder="AI'ya sor...">
                <button class="nav-btn" style="margin:0; border-color:var(--ai-purple); color:var(--ai-purple);" onclick="askAIAssistant()">?</button>
            </div>
        </div>
    </div>
</main>

<footer>
    <div class="ticker">
        +++ SYSTEM: V42 STABLE +++ SECURITY: MAXIMIZED +++ NO RIGHT-CLICK +++ ALL LANGUAGES ACTIVE +++ ADMIN CONTROL ENABLED +++ DEVELOPER: @RW_F00T +++
    </div>
</footer>

<script>
    /* ==============================================
       GÃœVENLÄ°K DUVARI (ANTI-INSPECT)
       ============================================== */
    document.addEventListener('contextmenu', e => e.preventDefault());
    document.onkeydown = function(e) {
        if (e.keyCode == 123) return false;
        if (e.ctrlKey && e.shiftKey && (e.keyCode == 'I'.charCodeAt(0) || e.keyCode == 'J'.charCodeAt(0) || e.keyCode == 'C'.charCodeAt(0))) return false;
        if (e.ctrlKey && e.keyCode == 'U'.charCodeAt(0)) return false;
        if (e.ctrlKey && e.keyCode == 'S'.charCodeAt(0)) return false;
    };
    document.addEventListener('dragstart', e => e.preventDefault());

    /* ==============================================
       SÄ°STEM Ã‡EKÄ°RDEÄžÄ° (CORE LOGIC)
       ============================================== */
    const firebaseConfig = { 
        apiKey: "AIzaSyDpaFcKI6XhYuWCiyZHUFey0T6uqKy8IPA", 
        databaseURL: "https://prem-d18e3-default-rtdb.firebaseio.com", 
        projectId: "prem-d18e3" 
    };
    firebase.initializeApp(firebaseConfig);
    const db = firebase.database();

    let pyInstance = null;
    let currentUser = "Guest";
    let isAdminMode = false;
    let isLocked = false;

    // ACE EDÄ°TÃ–R KURULUMU (TÃœM DÄ°LLER Ä°Ã‡Ä°N)
    const editor = ace.edit("ace-editor");
    editor.setTheme("ace/theme/terminal");
    editor.session.setMode("ace/mode/python");
    editor.setOptions({
        enableBasicAutocompletion: true,
        enableLiveAutocompletion: true,
        showPrintMargin: false
    });

    // PYTHON MOTORUNU YÃœKLE
    async function loadPythonEngine() {
        try {
            updateSystemLogs("Loading Python kernel...", "INFO");
            pyInstance = await loadPyodide();
            document.getElementById("run-btn").style.display = "inline-block";
            updateSystemLogs("Python 3.11 Ready.", "SUCCESS");
        } catch(e) { updateSystemLogs("Python Error!", "ERROR"); }
    }
    loadPythonEngine();

    // SÄ°STEME GÄ°RÄ°Åž
    function startSystem() {
        const id = document.getElementById("login-id").value;
        const key = document.getElementById("login-key").value;

        if(!id) return alert("KullanÄ±cÄ± adÄ± gerekli!");
        currentUser = id;

        if(id === "@rw_f00t" && key === "f00t_99x_Root!") {
            isAdminMode = true;
            document.getElementById("admin-trigger").style.display = "inline-block";
            document.getElementById("role-badge").innerText = "â™› ROOT ADMIN";
            document.getElementById("role-badge").style.color = "var(--admin-neon)";
            updateSystemLogs("Admin Access Verified.", "SEC");
        } else {
            document.getElementById("role-badge").innerText = "VERIFIED_USER";
            updateSystemLogs("User " + id + " joined.", "AUTH");
        }
        document.getElementById("auth-gate").style.display = "none";
    }

    // DÄ°L DEÄžÄ°ÅžTÄ°RME FONKSÄ°YONU (DÃœZELTÄ°LDÄ°)
    function changeLanguage() {
        const lang = document.getElementById("lang-select").value;
        editor.session.setMode("ace/mode/" + lang);
        
        // EÄŸer Python seÃ§ili deÄŸilse Ã§alÄ±ÅŸtÄ±r butonunu gizle
        document.getElementById("run-btn").style.display = (lang === "python") ? "inline-block" : "none";
        updateSystemLogs("Language changed to: " + lang, "SYS");
    }

    // KOD Ã‡ALIÅžTIRMA (PYTHON)
    async function executeCode() {
        toggleTerm(true);
        const term = document.getElementById("term-body");
        term.innerText = ">> Script running...\n";

        try {
            await pyInstance.runPythonAsync(`import sys, io\nsys.stdout = io.StringIO()`);
            await pyInstance.runPythonAsync(editor.getValue());
            const output = pyInstance.runPython("sys.stdout.getvalue()");
            term.innerText = output || ">> Process finished (No output).";
        } catch(e) {
            term.innerText = ">> RUNTIME ERROR:\n" + e;
        }
    }

    /* ==============================================
       ADMÄ°N FONKSÄ°YONLARI (FULL CONTROL)
       ============================================== */
    
    // 1. GÃ¶rÃ¼nÃ¼m GÃ¼ncelleme
    function updateAppearance() {
        const bgUrl = document.getElementById("adm-bg-url").value;
        const color = document.getElementById("adm-color-picker").value;

        // Firebase'e gÃ¶nder (TÃ¼m kullanÄ±cÄ±larda deÄŸiÅŸsin)
        db.ref("v42_settings").set({
            background: bgUrl,
            themeColor: color
        });
        updateSystemLogs("Appearance settings pushed to network.", "ADMIN");
    }

    // Dinamik GÃ¶rÃ¼nÃ¼m Dinleyicisi
    db.ref("v42_settings").on("value", snapshot => {
        const data = snapshot.val();
        if(data) {
            if(data.background) document.documentElement.style.setProperty('--bg-img', `url('${data.background}')`);
            if(data.themeColor) document.documentElement.style.setProperty('--primary', data.themeColor);
        }
    });

    // 2. Lockdown KontrolÃ¼
    function toggleLockdown() {
        isLocked = !isLocked;
        db.ref("v42_lockdown").set(isLocked);
    }
    db.ref("v42_lockdown").on("value", s => {
        isLocked = s.val();
        document.getElementById("lock-text").innerText = isLocked ? "AKTÄ°F" : "PASÄ°F";
        updateSystemLogs("Lockdown status: " + isLocked, "SEC");
    });

    // 3. Duyuru GÃ¶nderme
    function sendBroadcast() {
        const msg = document.getElementById("adm-broadcast").value;
        if(msg) {
            db.ref("v42_alert").set({ text: msg, time: Date.now() });
            document.getElementById("adm-broadcast").value = "";
        }
    }
    db.ref("v42_alert").on("value", s => {
        const d = s.val();
        if(d) alert("!!! ADMÄ°N MESAJI !!!\n\n" + d.text);
    });

    /* ==============================================
       SOSYAL VE YARDIMCI ARAÃ‡LAR
       ============================================== */
    
    function sendChatMessage() {
        if(isLocked && !isAdminMode) return alert("Sistem kilitli!");
        const input = document.getElementById("chat-input");
        if(input.value) {
            db.ref("v42_chat").push({
                u: currentUser,
                m: input.value,
                a: isAdminMode
            });
            input.value = "";
        }
    }

    db.ref("v42_chat").limitToLast(30).on("value", s => {
        const stream = document.getElementById("chat-stream");
        stream.innerHTML = "";
        s.forEach(child => {
            const v = child.val();
            const color = v.a ? "var(--admin-neon)" : "var(--primary)";
            stream.innerHTML += `<div><b style="color:${color}">${v.a ? '[ADM] ' : ''}${v.u}:</b> ${v.m}</div>`;
        });
        stream.scrollTop = stream.scrollHeight;
    });

    function askAIAssistant() {
        const q = document.getElementById("ai-input");
        const s = document.getElementById("ai-stream");
        if(!q.value) return;
        s.innerHTML += `<div style="color:#fff;">> ${q.value}</div>`;
        setTimeout(() => {
            s.innerHTML += `<div>AI: Analiz tamamlandÄ±. V42 Ã§ekirdek yapÄ±sÄ± bu komutu destekliyor.</div>`;
            s.scrollTop = s.scrollHeight;
        }, 800);
        q.value = "";
    }

    function updateSystemLogs(m, t) {
        const view = document.getElementById("log-view");
        const time = new Date().toLocaleTimeString();
        view.innerHTML = `<div class="log-line"><b>[${t}]</b> [${time}] ${m}</div>` + view.innerHTML;
    }

    function toggleAdmin() {
        const p = document.getElementById("admin-panel");
        p.style.display = (p.style.display === "flex") ? "none" : "flex";
    }

    function toggleTerm(state) {
        document.getElementById("terminal-box").style.display = state ? "flex" : "none";
    }

    function clearLogs() {
        document.getElementById("log-view").innerHTML = "";
        updateSystemLogs("Logs wiped by admin.", "SEC");
    }

    function downloadCode() {
        const b = new Blob([editor.getValue()], {type: "text/plain"});
        const a = document.createElement("a");
        a.href = URL.createObjectURL(b);
        a.download = "secure_source.txt";
        a.click();
    }
</script>
</body>
</html>
