<!DOCTYPE html>
<html lang="tr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>CodEditor V43 | SHADOW PROTOCOL</title>
    
    <script src="https://cdn.jsdelivr.net/pyodide/v0.23.4/full/pyodide.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/ace/1.23.0/ace.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/ace/1.23.0/ext-language_tools.min.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.1.3/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.1.3/firebase-database-compat.js"></script>

    <style>
        /* ==============================================
           SÄ°STEM GENETÄ°ÄžÄ° VE DÄ°NAMÄ°K CSS
           ============================================== */
        :root {
            --primary: #00d4ff; 
            --admin-neon: #00ff41;
            --bg-deep: #020202;
            --bg-img: url('https://images.unsplash.com/photo-1550745165-9bc0b252726f?q=80&w=2070');
            --bg-color: #020202;
            --bg-panel: rgba(10, 10, 10, 0.95);
            --text-main: #e0e0e0;
            --danger: #ff003c;
            --warning: #ffcc00;
            --ai-purple: #b080ff;
        }

        /* GÃœVENLÄ°K: SEÃ‡Ä°M VE KOPYALAMA YASAK */
        * {
            box-sizing: border-box;
            outline: none;
            -webkit-user-select: none;
            user-select: none;
            cursor: default;
        }

        /* YAZILABÄ°LÄ°R ALANLARDA SEÃ‡Ä°ME Ä°ZÄ°N VER */
        #ace-editor, input, textarea, #term-body, .selectable {
            -webkit-user-select: text !important;
            user-select: text !important;
            cursor: text;
        }

        body, html {
            margin: 0; padding: 0; height: 100vh; width: 100vw;
            background: var(--bg-img) center center / cover no-repeat fixed var(--bg-color);
            color: var(--text-main); font-family: 'Consolas', monospace;
            overflow: hidden; display: flex; flex-direction: column;
            transition: 0.5s ease;
        }

        .sys-frame {
            position: fixed; inset: 0; border: 4px solid var(--primary);
            pointer-events: none; z-index: 10000; transition: border-color 0.8s;
            box-shadow: inset 0 0 100px rgba(0,0,0,0.8);
        }

        /* --- [ LOGIN GATE (TEMÄ°ZLENDÄ°) ] --- */
        #auth-gate {
            position: fixed; inset: 0; background: #000; z-index: 20000;
            display: flex; justify-content: center; align-items: center;
        }
        .gate-card {
            width: 450px; padding: 50px; background: #0a0a0a; border: 1px solid var(--primary);
            border-radius: 15px; text-align: center; box-shadow: 0 0 60px rgba(0, 212, 255, 0.1);
        }
        .gate-input {
            width: 100%; padding: 15px; margin-bottom: 15px; background: #000;
            border: 1px solid #222; color: #fff; border-radius: 8px; font-size: 14px;
        }
        .gate-input:focus { border-color: var(--primary); }
        .gate-btn {
            width: 100%; padding: 15px; background: var(--primary); color: #000;
            border: none; font-weight: 900; border-radius: 8px; cursor: pointer; transition: 0.3s;
        }
        .gate-btn:hover { background: #fff; }

        /* --- [ HEADER ] --- */
        header {
            height: 70px; background: rgba(0,0,0,0.95); backdrop-filter: blur(15px);
            border-bottom: 2px solid var(--primary); display: flex;
            align-items: center; justify-content: space-between; padding: 0 30px; z-index: 5000;
        }
        .nav-btn {
            background: rgba(255,255,255,0.03); color: var(--primary); border: 1px solid var(--primary);
            padding: 10px 18px; border-radius: 5px; font-weight: bold; cursor: pointer; margin-left: 10px; transition: 0.2s;
        }
        .nav-btn:hover { background: var(--primary); color: #000; }
        .admin-btn { background: var(--danger); color: #fff; border: none; display: none; }

        /* --- [ ANA ALAN ] --- */
        main { display: grid; grid-template-columns: 280px 1fr 380px; flex: 1; overflow: hidden; }

        .log-panel { background: rgba(0,0,0,0.85); border-right: 1px solid #1a1a1a; padding: 25px; overflow-y: auto; }
        .log-line { font-size: 11px; color: #555; margin-bottom: 8px; border-left: 2px solid var(--primary); padding-left: 10px; }

        #editor-container { position: relative; background: transparent; }
        #ace-editor { width: 100%; height: 100%; background: transparent !important; font-size: 16px; }

        #terminal-box {
            position: absolute; bottom: 0; width: 100%; height: 260px;
            background: rgba(2,2,2,0.98); border-top: 4px solid var(--primary);
            display: none; flex-direction: column; z-index: 1500;
        }

        /* --- [ ADMIN PANEL (OVERLORD) ] --- */
        #admin-panel {
            position: fixed; top: 50%; left: 50%; transform: translate(-50%, -50%);
            width: 1000px; height: 780px; background: rgba(5,5,5,0.99); border: 2px solid var(--admin-neon);
            z-index: 30000; display: none; flex-direction: column; padding: 45px; border-radius: 25px;
            backdrop-filter: blur(25px); box-shadow: 0 0 120px rgba(0,255,65,0.15);
        }
        .admin-grid { display: grid; grid-template-columns: 1fr 1fr; gap: 35px; margin-top: 30px; }
        .adm-card { background: #0c0c0c; border: 1px solid #1a1a1a; padding: 25px; border-radius: 15px; }

        /* FOOTER */
        footer { height: 45px; background: #000; border-top: 1px solid #111; display: flex; align-items: center; overflow: hidden; }
        .ticker { white-space: nowrap; animation: ticker-move 35s linear infinite; color: var(--primary); font-weight: bold; font-size: 13px; text-transform: uppercase; }
        @keyframes ticker-move { 0% { transform: translateX(100%); } 100% { transform: translateX(-100%); } }

    </style>
</head>
<body id="main-body">

<div class="sys-frame"></div>

<div id="auth-gate">
    <div class="gate-card">
        <h1 style="color:var(--primary); margin:0; letter-spacing:5px;">V43 SHADOW</h1>
        <p style="color:#555; font-size:11px; margin-bottom:30px;">ENCRYPTED ACCESS POINT</p>
        
        <input type="text" id="login-id" class="gate-input" placeholder="User Identification">
        <input type="password" id="login-key" class="gate-input" placeholder="Security Password">
        <button class="gate-btn" onclick="startSystem()">INITIALIZE KERNEL</button>
        
        <p id="boot-status" style="margin-top:20px; font-size:11px; color:#333;">Awaiting authorization...</p>
    </div>
</div>

<div id="admin-panel">
    <div style="display:flex; justify-content:space-between; align-items:center; border-bottom:1px solid #222; padding-bottom:20px;">
        <h1 style="color:var(--admin-neon); margin:0; letter-spacing:2px;">â™› SHADOW COMMAND CENTER</h1>
        <button class="nav-btn" style="border-color:red; color:red;" onclick="toggleAdmin()">CLOSE</button>
    </div>

    <div class="admin-grid">
        <div class="adm-card">
            <h3 style="color:var(--admin-neon); font-size:14px;">VISUAL PROTOCOLS</h3>
            <label style="font-size:11px; color:#555;">Arka Plan Foto (URL):</label>
            <input type="text" id="adm-bg-url" class="gate-input" style="padding:10px; margin-top:5px; border-color:#333;" placeholder="https://image-link.com">
            
            <label style="font-size:11px; color:#555; margin-top:10px; display:block;">Sistem Neon Rengi:</label>
            <input type="color" id="adm-color-picker" style="width:100%; height:45px; background:none; border:1px solid #333; cursor:pointer; margin-top:5px;">
            
            <button class="gate-btn" style="margin-top:20px; background:var(--admin-neon); font-size:12px;" onclick="updateAppearance()">UPDATE ENVIRONMENT</button>
        </div>

        <div class="adm-card">
            <h3 style="color:var(--warning); font-size:14px;">SYSTEM SECURITY</h3>
            <div style="display:flex; flex-direction:column; gap:12px;">
                <button class="nav-btn" style="margin:0; width:100%; text-align:left;" onclick="toggleLockdown()">LOCKDOWN MODE: <span id="lock-text" style="float:right;">OFF</span></button>
                <button class="nav-btn" style="margin:0; width:100%; text-align:left;" onclick="clearLogs()">WIPE SYSTEM LOGS</button>
                <button class="nav-btn" style="margin:0; width:100%; text-align:left; border-color:var(--danger); color:var(--danger);" onclick="location.reload()">FORCED REBOOT</button>
            </div>
        </div>
    </div>

    <div class="adm-card" style="margin-top:25px;">
        <h3 style="color:var(--danger); font-size:14px;">NETWORK BROADCAST</h3>
        <textarea id="adm-broadcast" class="gate-input selectable" style="height:100px; border-color:#333;" placeholder="Send critical alert to all users..."></textarea>
        <button class="gate-btn" style="background:var(--danger); color:#fff; font-size:12px;" onclick="sendBroadcast()">BROADCAST EMERGENCY ALERT</button>
    </div>
</div>

<header>
    <div style="display:flex; align-items:center; gap:25px;">
        <span style="font-size:26px; font-weight:900; color:var(--primary); letter-spacing:4px;">SHADOW_V43</span>
        <span id="role-badge" style="background:#111; font-size:10px; padding:5px 15px; border-radius:20px; border:1px solid #222;">ID_PENDING</span>
    </div>
    <div style="display:flex; align-items:center;">
        <button id="admin-trigger" class="nav-btn admin-btn" onclick="toggleAdmin()">â™› ADMIN PANEL</button>
        <select id="lang-select" class="nav-btn" style="background:#000;" onchange="changeLanguage()">
            <option value="python">Python 3.11</option>
            <option value="javascript">JavaScript (ES6)</option>
            <option value="html">HTML5 / CSS3</option>
        </select>
        <button id="run-btn" class="nav-btn" style="background:var(--primary); color:#000; display:none;" onclick="executeCode()">â–¶ RUN CODE</button>
        <button class="nav-btn" style="border-color:var(--warning); color:var(--warning);" onclick="downloadCode()">ðŸ“¥ EXPORT</button>
    </div>
</header>

<main>
    <div class="log-panel" id="log-view">
        <div class="log-line"><b>[SYS]</b> Booting Shadow V43 kernel...</div>
        <div class="log-line"><b>[SEC]</b> Anti-Inspect protocols engaged.</div>
    </div>

    <div id="editor-container">
        <div id="ace-editor"># V43 SHADOW PROTOCOL EDITION
# High-Security Integrated Environment
# Admin: @rw_f00t

print("System Stabilized. Welcome back, Overlord.")</div>
        
        <div id="terminal-box">
            <div style="background:var(--primary); color:#000; padding:10px 25px; font-weight:900; display:flex; justify-content:space-between;">
                <span>STDOUT_STREAM</span>
                <span onclick="toggleTerm(false)" style="cursor:pointer;">[X]</span>
            </div>
            <div id="term-body" class="selectable" style="flex:1; padding:25px; color:var(--primary); overflow-y:auto; font-family:monospace; font-size:16px; line-height:1.5;"></div>
        </div>
    </div>

    <div style="background:rgba(5,5,5,0.98); border-left:1px solid #111; display:flex; flex-direction:column;">
        <div style="flex:1; padding:25px; display:flex; flex-direction:column; border-bottom:1px solid #111;">
            <b style="font-size:12px; color:var(--primary); margin-bottom:15px; letter-spacing:2px;">ENCRYPTED CHAT</b>
            <div id="chat-stream" class="selectable" style="flex:1; background:#000; border:1px solid #1a1a1a; padding:15px; font-size:12px; overflow-y:auto; margin-bottom:15px; border-radius:8px;"></div>
            <div style="display:flex; gap:10px;">
                <input type="text" id="chat-input" class="gate-input selectable" style="margin:0; padding:12px;" placeholder="Message...">
                <button class="nav-btn" style="margin:0; padding:0 15px;" onclick="sendChatMessage()">></button>
            </div>
        </div>
        <div style="flex:1; padding:25px; display:flex; flex-direction:column; background:rgba(176,128,255,0.01);">
            <b style="font-size:12px; color:var(--ai-purple); margin-bottom:15px; letter-spacing:2px;">NEURAL NETWORK AI</b>
            <div id="ai-stream" class="selectable" style="flex:1; background:#000; border:1px solid var(--ai-purple); padding:15px; font-size:12px; color:var(--ai-purple); overflow-y:auto; margin-bottom:15px; border-radius:8px;">AI: Waiting for syntax query...</div>
            <div style="display:flex; gap:10px;">
                <input type="text" id="ai-input" class="gate-input selectable" style="margin:0; padding:12px; border-color:var(--ai-purple);" placeholder="Ask AI...">
                <button class="nav-btn" style="margin:0; border-color:var(--ai-purple); color:var(--ai-purple); padding:0 15px;" onclick="askAIAssistant()">?</button>
            </div>
        </div>
    </div>
</main>

<footer>
    <div class="ticker">
        +++ STATUS: STEALTH +++ ENCRYPTION: ACTIVE +++ NO LEAKS DETECTED +++ ADMIN: @RW_F00T +++ KERNEL V43.0 +++ GLOBAL CHAT ONLINE +++ ALL LANGUAGES READY +++
    </div>
</footer>

<script>
    /* ==============================================
       ANTI-THEFT & ANTI-INSPECT (BÃœTÃœNCÃœL KORUMA)
       ============================================== */
    document.addEventListener('contextmenu', e => e.preventDefault());
    document.onkeydown = function(e) {
        if (e.keyCode == 123) return false; // F12
        if (e.ctrlKey && e.shiftKey && (e.keyCode == 'I'.charCodeAt(0) || e.keyCode == 'J'.charCodeAt(0) || e.keyCode == 'C'.charCodeAt(0))) return false;
        if (e.ctrlKey && e.keyCode == 'U'.charCodeAt(0)) return false; // View Source
        if (e.ctrlKey && e.keyCode == 'S'.charCodeAt(0)) return false; // Save Page
    };
    document.addEventListener('dragstart', e => e.preventDefault());

    /* ==============================================
       SÄ°STEM Ã‡EKÄ°RDEÄžÄ° (DATABASE & ENGINES)
       ============================================== */
    const firebaseConfig = { 
        apiKey: "AIzaSyDpaFcKI6XhYuWCiyZHUFey0T6uqKy8IPA", 
        databaseURL: "https://prem-d18e3-default-rtdb.firebaseio.com", 
        projectId: "prem-d18e3" 
    };
    firebase.initializeApp(firebaseConfig);
    const db = firebase.database();

    let pyEngine = null;
    let username = "Guest";
    let isRoot = false;
    let systemLocked = false;

    // ACE EDÄ°TÃ–R BAÅžLATMA
    const editor = ace.edit("ace-editor");
    editor.setTheme("ace/theme/terminal");
    editor.session.setMode("ace/mode/python");
    editor.setOptions({
        enableBasicAutocompletion: true,
        enableLiveAutocompletion: true,
        showPrintMargin: false,
        fontFamily: "Consolas"
    });

    // PYTHON KERNEL YÃœKLEME
    async function initKernel() {
        try {
            updateLogs("Kernel loading...", "INIT");
            pyEngine = await loadPyodide();
            document.getElementById("run-btn").style.display = "inline-block";
            document.getElementById("boot-status").innerText = "Kernel Ready.";
            document.getElementById("boot-status").style.color = "#00ff41";
            updateLogs("Python 3.11 operational.", "SUCCESS");
        } catch(e) { updateLogs("Kernel Failure!", "ERROR"); }
    }
    initKernel();

    // GÃœVENLÄ° GÄ°RÄ°Åž SÄ°STEMÄ°
    function startSystem() {
        const id = document.getElementById("login-id").value;
        const key = document.getElementById("login-key").value;

        if(!id) return alert("ID required!");
        username = id;

        // GÄ°ZLÄ° ADMÄ°N KONTROLÃœ
        if(id === "@rw_f00t" && key === "f00t_99x_Root!") {
            isRoot = true;
            document.getElementById("admin-trigger").style.display = "inline-block";
            document.getElementById("role-badge").innerText = "â™› ROOT_ADMIN";
            document.getElementById("role-badge").style.color = "var(--admin-neon)";
            document.getElementById("role-badge").style.borderColor = "var(--admin-neon)";
            updateLogs("Stealth admin access verified.", "SEC");
        } else {
            document.getElementById("role-badge").innerText = "VERIFIED_USER";
            updateLogs("User [" + id + "] authenticated.", "AUTH");
        }
        document.getElementById("auth-gate").style.display = "none";
    }

    // DÄ°L SEÃ‡Ä°MÄ°
    function changeLanguage() {
        const lang = document.getElementById("lang-select").value;
        const modeMap = {
            "python": "ace/mode/python",
            "javascript": "ace/mode/javascript",
            "html": "ace/mode/html"
        };
        editor.session.setMode(modeMap[lang]);
        document.getElementById("run-btn").style.display = (lang === "python") ? "inline-block" : "none";
        updateLogs("Environment: " + lang, "SYS");
    }

    // KOD Ã‡ALIÅžTIRMA
    async function executeCode() {
        toggleTerm(true);
        const term = document.getElementById("term-body");
        term.innerText = ">> Initializing runtime...\n";

        try {
            await pyEngine.runPythonAsync(`import sys, io\nsys.stdout = io.StringIO()`);
            await pyEngine.runPythonAsync(editor.getValue());
            const output = pyEngine.runPython("sys.stdout.getvalue()");
            term.innerText = output || ">> Process finished successfully.";
        } catch(e) {
            term.innerText = ">> ERROR:\n" + e;
        }
    }

    /* ==============================================
       ADMÄ°N PROTOKOLLERÄ°
       ============================================== */
    
    function updateAppearance() {
        const url = document.getElementById("adm-bg-url").value;
        const col = document.getElementById("adm-color-picker").value;
        db.ref("v43_config").set({ bg: url, accent: col });
        updateLogs("Environment parameters updated.", "ADMIN");
    }

    db.ref("v43_config").on("value", s => {
        const d = s.val();
        if(d) {
            if(d.bg) document.documentElement.style.setProperty('--bg-img', `url('${d.bg}')`);
            if(d.accent) document.documentElement.style.setProperty('--primary', d.accent);
        }
    });

    function toggleLockdown() {
        systemLocked = !systemLocked;
        db.ref("v43_lockdown").set(systemLocked);
    }
    db.ref("v43_lockdown").on("value", s => {
        systemLocked = s.val();
        document.getElementById("lock-text").innerText = systemLocked ? "ACTIVE" : "OFF";
        document.getElementById("lock-text").style.color = systemLocked ? "red" : "var(--admin-neon)";
    });

    function sendBroadcast() {
        const msg = document.getElementById("adm-broadcast").value;
        if(msg) {
            db.ref("v43_alert").set({ text: msg, ts: Date.now() });
            document.getElementById("adm-broadcast").value = "";
        }
    }
    db.ref("v43_alert").on("value", s => {
        const d = s.val();
        if(d) alert("!!! OVERLORD MESSAGE !!!\n\n" + d.text);
    });

    /* ==============================================
       COMMUNICATION
       ============================================== */
    
    function sendChatMessage() {
        if(systemLocked && !isRoot) return alert("Network is currently in Lockdown!");
        const input = document.getElementById("chat-input");
        if(input.value) {
            db.ref("v43_chat").push({ u: username, m: input.value, root: isRoot });
            input.value = "";
        }
    }

    db.ref("v43_chat").limitToLast(40).on("value", s => {
        const stream = document.getElementById("chat-stream");
        stream.innerHTML = "";
        s.forEach(c => {
            const v = c.val();
            const col = v.root ? "var(--admin-neon)" : "var(--primary)";
            stream.innerHTML += `<div><b style="color:${col}">${v.root ? '[ROOT] ' : ''}${v.u}:</b> ${v.m}</div>`;
        });
        stream.scrollTop = stream.scrollHeight;
    });

    function askAIAssistant() {
        const q = document.getElementById("ai-input");
        const s = document.getElementById("ai-stream");
        if(!q.value) return;
        s.innerHTML += `<div style="color:#fff;">> ${q.value}</div>`;
        setTimeout(() => {
            s.innerHTML += `<div>AI: Analyzing syntax for Shadow V43... Command valid.</div>`;
            s.scrollTop = s.scrollHeight;
        }, 800);
        q.value = "";
    }

    function updateLogs(m, t) {
        const v = document.getElementById("log-view");
        v.innerHTML = `<div class="log-line"><b>[${t}]</b> ${m}</div>` + v.innerHTML;
    }

    function toggleAdmin() {
        const p = document.getElementById("admin-panel");
        p.style.display = (p.style.display === "flex") ? "none" : "flex";
    }

    function toggleTerm(state) {
        document.getElementById("terminal-box").style.display = state ? "flex" : "none";
    }

    function clearLogs() {
        document.getElementById("log-view").innerHTML = "";
        updateLogs("Logs purged.", "SEC");
    }

    function downloadCode() {
        const b = new Blob([editor.getValue()], {type: "text/plain"});
        const a = document.createElement("a");
        a.href = URL.createObjectURL(b);
        a.download = "shadow_v43_source.txt";
        a.click();
    }
</script>
</body>
</html>
