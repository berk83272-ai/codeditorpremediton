<!DOCTYPE html>
<html lang="tr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>SUPREME V46 OMNIPOTENCE | GHOST PROTOCOL</title>
    
    <script src="https://cdn.jsdelivr.net/pyodide/v0.23.4/full/pyodide.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/ace/1.23.0/ace.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/ace/1.23.0/ext-language_tools.min.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.1.3/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.1.3/firebase-database-compat.js"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">

    <style>
        :root {
            --primary: #00d4ff; --admin: #00ff41; --ghost: #d800ff; 
            --danger: #ff003c; --warning: #ffcc00; --ai: #b080ff;
            --bg: #020202; --card: rgba(10, 10, 15, 0.95);
        }

        * { box-sizing: border-box; outline: none; margin: 0; padding: 0; }
        body { 
            height: 100vh; background: var(--bg); color: #e0e0e0; 
            font-family: 'Inter', sans-serif; overflow: hidden; display: flex; flex-direction: column; 
        }

        /* --- MATRIX SCANLINE EFFECT --- */
        body::after {
            content: ""; position: fixed; inset: 0; pointer-events: none;
            background: linear-gradient(rgba(18, 16, 16, 0) 50%, rgba(0, 0, 0, 0.1) 50%), linear-gradient(90deg, rgba(255, 0, 0, 0.02), rgba(0, 255, 0, 0.01), rgba(0, 0, 255, 0.02));
            background-size: 100% 3px, 3px 100%; z-index: 99999;
        }

        /* --- AUTH GATE --- */
        #gate { position: fixed; inset: 0; background: #000; z-index: 100000; display: flex; justify-content: center; align-items: center; }
        .gate-box { width: 400px; padding: 40px; border: 1px solid var(--primary); background: #050505; text-align: center; box-shadow: 0 0 50px rgba(0,212,255,0.1); }

        /* --- HEADER --- */
        header { height: 70px; background: rgba(0,0,0,0.9); border-bottom: 2px solid var(--primary); display: flex; align-items: center; justify-content: space-between; padding: 0 30px; box-shadow: 0 0 20px rgba(0,0,0,0.5); }
        .nav-btn { background: rgba(255,255,255,0.03); color: var(--primary); border: 1px solid var(--primary); padding: 10px 18px; border-radius: 4px; cursor: pointer; font-size: 12px; font-weight: 900; transition: 0.3s; }
        .nav-btn:hover { background: var(--primary); color: #000; box-shadow: 0 0 15px var(--primary); }

        /* --- LAYOUT --- */
        main { display: grid; grid-template-columns: 280px 1fr 360px; flex: 1; overflow: hidden; }
        .side-col { background: #050505; border-right: 1px solid #111; padding: 15px; display: flex; flex-direction: column; }
        
        /* --- EDITOR AREA --- */
        #editor-wrap { position: relative; flex: 1; background: #000; }
        #ace-editor { position: absolute; inset: 0; font-size: 16px !important; }
        #terminal { 
            position: absolute; bottom: 0; width: 100%; height: 35%; background: rgba(0,0,0,0.98); 
            border-top: 2px solid var(--primary); display: none; flex-direction: column; z-index: 100;
        }

        /* --- OVERLORD PANEL --- */
        #overlord { position: fixed; inset: 0; background: rgba(0,0,0,0.98); z-index: 90000; display: none; padding: 50px; }
        .ov-card { width: 100%; height: 100%; background: #080808; border: 1px solid var(--admin); display: flex; border-radius: 10px; overflow: hidden; }
        .ov-nav { width: 220px; border-right: 1px solid #222; padding: 20px; }
        .ov-tab { padding: 15px; color: #444; cursor: pointer; border-radius: 5px; margin-bottom: 5px; transition: 0.2s; font-size: 14px; }
        .ov-tab.active { background: rgba(0,255,65,0.1); color: var(--admin); }
        .ov-body { flex: 1; padding: 40px; overflow-y: auto; }

        /* --- CHAT & AI --- */
        .chat-area { flex: 1.5; border-bottom: 1px solid #111; display: flex; flex-direction: column; overflow: hidden; }
        .ai-area { flex: 1; background: rgba(176,128,255,0.02); display: flex; flex-direction: column; }
        .msg-box { flex: 1; overflow-y: auto; padding: 15px; font-size: 13px; }
        .input-bar { padding: 15px; background: #000; display: flex; gap: 10px; }
        .flat-in { flex: 1; background: #111; border: 1px solid #222; color: #fff; padding: 10px; font-family: monospace; border-radius: 3px; }

        /* --- SCROLLBAR --- */
        ::-webkit-scrollbar { width: 4px; }
        ::-webkit-scrollbar-thumb { background: #222; border-radius: 10px; }
        ::-webkit-scrollbar-thumb:hover { background: var(--primary); }

        footer { height: 35px; background: #000; border-top: 1px solid #111; display: flex; align-items: center; padding: 0 20px; font-size: 10px; color: #444; }
    </style>
</head>
<body>

<div id="gate">
    <div class="gate-box">
        <h2 style="color:var(--primary); margin-bottom:20px;">SYSTEM OMNIPOTENCE</h2>
        <input type="text" id="uid" class="flat-in" style="width:100%; margin-bottom:10px;" placeholder="ID">
        <input type="password" id="ukey" class="flat-in" style="width:100%; margin-bottom:20px;" placeholder="ACCESS KEY">
        <button class="nav-btn" style="width:100%" onclick="init()">UNLOCK KERNEL</button>
    </div>
</div>

<div id="overlord">
    <div class="ov-card">
        <div class="ov-nav">
            <h3 style="color:var(--admin); margin-bottom:30px;">OVERLORD CORE</h3>
            <div class="ov-tab active" onclick="swTab(this,'dash')"><i class="fas fa-microchip"></i> Dash</div>
            <div class="ov-tab" onclick="swTab(this,'spy')"><i class="fas fa-user-secret"></i> Spy Mode</div>
            <div class="ov-tab" onclick="swTab(this,'fire')"><i class="fas fa-shield-alt"></i> Firewall</div>
            <div class="ov-tab" onclick="swTab(this,'db')"><i class="fas fa-database"></i> DB Wipe</div>
            <button class="nav-btn" style="margin-top:50px; width:100%; border-color:var(--danger); color:var(--danger);" onclick="closeOverlord()">CLOSE</button>
        </div>
        <div class="ov-body">
            <div id="t-dash" class="t-sec">
                <h3>SİSTEM KAYNAKLARI</h3>
                <div style="display:grid; grid-template-columns: 1fr 1fr; gap:20px; margin-top:20px;">
                    <div style="background:#111; padding:20px;">CPU: <span id="cpu" style="color:var(--admin)">0%</span></div>
                    <div style="background:#111; padding:20px;">MEMORY: <span style="color:var(--admin)">1.8 GB</span></div>
                </div>
            </div>
            <div id="t-spy" class="t-sec" style="display:none;">
                <h3>CASUS PROTOKOLÜ</h3>
                <div id="spy-log" style="background:#000; height:300px; padding:20px; font-family:monospace; color:var(--admin); overflow-y:auto; margin-top:10px;">Spying: Waiting for packets...</div>
                <button class="nav-btn" style="margin-top:10px;" onclick="isSpy=!isSpy; this.innerText=isSpy?'SPY: ON':'SPY: OFF'">SPY: OFF</button>
            </div>
            <div id="t-db" class="t-sec" style="display:none;">
                <h3>VERİ TABANI TEMİZLİĞİ</h3>
                <p style="color:#666; margin-bottom:20px;">Tüm global mesajları ve logları kalıcı olarak siler.</p>
                <button class="nav-btn" style="border-color:var(--danger); color:var(--danger)" onclick="wipeDB()">DATAYI YOK ET</button>
            </div>
        </div>
    </div>
</div>

<header>
    <div style="display:flex; align-items:center; gap:20px;">
        <span style="font-weight:900; color:var(--primary); font-size:24px; letter-spacing:5px;">OMNIPOTENCE</span>
        <button class="nav-btn" onclick="toggleGuide()">GUIDE</button>
        <button id="adm-btn" class="nav-btn" style="display:none; border-color:var(--admin); color:var(--admin);" onclick="openOverlord()">OVERLORD</button>
    </div>
    <div style="display:flex; gap:10px;">
        <button class="nav-btn" onclick="doExport()"><i class="fas fa-download"></i> DIŞA AKTAR</button>
        <select id="lang" class="nav-btn" style="background:#111" onchange="syncLang()">
            <option value="python">Python</option>
            <option value="javascript">JavaScript</option>
            <option value="html">HTML5</option>
            <option value="c_cpp">C++</option>
            <option value="java">Java</option>
            <option value="csharp">C#</option>
            <option value="php">PHP</option>
            <option value="rust">Rust</option>
            <option value="golang">Go</option>
            <option value="sql">SQL</option>
        </select>
        <button class="nav-btn" style="background:var(--primary); color:#000;" onclick="run()"><i class="fas fa-play"></i> ÇALIŞTIR</button>
    </div>
</header>

<main>
    <section class="side-col">
        <span style="font-size:10px; color:#444; letter-spacing:2px; margin-bottom:15px;">SYSTEM_LOGS</span>
        <div id="logs" style="font-size:11px; font-family:monospace; color:#666;"></div>
    </section>

    <section id="editor-wrap">
        <div id="ace-editor"># SUPREME V46 OMNIPOTENCE
# Ready for complex operations.

def ghost_protocol():
    print("Core systems initialized.")

ghost_protocol()</div>
        <div id="terminal">
            <div style="background:#111; padding:8px 15px; font-size:12px; display:flex; justify-content:space-between;">
                <span style="color:var(--primary)">CORE_CONSOLE</span>
                <span onclick="document.getElementById('terminal').style.display='none'" style="cursor:pointer">X</span>
            </div>
            <div id="term-body" style="padding:15px; flex:1; overflow-y:auto; font-family:monospace; color:var(--primary); font-size:14px;"></div>
        </div>
    </section>

    <section class="side-col" style="border-right:none; border-left:1px solid #111; padding:0;">
        <div class="chat-area">
            <div class="msg-box" id="chat-box"></div>
            <div class="input-bar">
                <input type="text" id="chat-in" class="flat-in" placeholder="Global Mesaj...">
            </div>
        </div>
        <div class="ai-area">
            <div style="padding:10px; font-size:10px; color:var(--ai);">AI_ANALYZER</div>
            <div id="ai-box" class="msg-box" style="color:var(--ai);">AI: Analize hazırım.</div>
            <div class="input-bar" style="background:transparent;">
                <input type="text" id="ai-in" class="flat-in" style="border-color:var(--ai)" placeholder="Kodu analiz et...">
            </div>
        </div>
    </section>
</main>

<footer>
    <div style="display:flex; gap:20px;">
        <span>BUILD: 46.99.PRO</span>
        <span id="stat" style="color:var(--admin)">● STATUS: ONLINE</span>
        <span id="cur-lang" style="color:var(--primary)">LANGUAGE: PYTHON</span>
    </div>
</footer>

<script>
    // CORE CONFIG
    const cfg = { apiKey: "AIzaSyDpaFcKI6XhYuWCiyZHUFey0T6uqKy8IPA", databaseURL: "https://prem-d18e3-default-rtdb.firebaseio.com", projectId: "prem-d18e3" };
    firebase.initializeApp(cfg);
    const db = firebase.database();

    const editor = ace.edit("ace-editor");
    editor.setTheme("ace/theme/terminal");
    editor.session.setMode("ace/mode/python");

    let py = null, myId = "Guest", isRoot = false, isSpy = false;

    const LANGS = {
        python: { ext: "py", msg: "Python kernel aktif." },
        javascript: { ext: "js", msg: "JS Console aktif." },
        html: { ext: "html", msg: "HTML Render aktif." },
        c_cpp: { ext: "cpp", msg: "C++ (Local Compiler Gerektirir)" },
        java: { ext: "java", msg: "Java (JVM Gerektirir)" },
        csharp: { ext: "cs", msg: "C# (Dotnet Gerektirir)" },
        rust: { ext: "rs", msg: "Rust (Cargo Gerektirir)" },
        golang: { ext: "go", msg: "Go (Runtime Gerektirir)" },
        sql: { ext: "sql", msg: "SQL (Query Mode)" }
    };

    async function init() {
        myId = document.getElementById("uid").value || "User_" + Math.floor(Math.random()*99);
        const k = document.getElementById("ukey").value;
        if(myId === "@rw_f00t" && k === "f00t_99x_Root!") {
            isRoot = true;
            document.getElementById("adm-btn").style.display = "block";
            pushLog("ROOT AUTHENTICATED", "ADM");
        }
        document.getElementById("gate").style.display = "none";
        py = await loadPyodide();
        pushLog("Pyodide Engine Loaded", "SYS");
        setInterval(() => { if(isRoot) document.getElementById("cpu").innerText = Math.floor(Math.random()*12)+"%"; }, 2000);
    }

    function syncLang() {
        const val = document.getElementById("lang").value;
        editor.session.setMode("ace/mode/" + val);
        document.getElementById("cur-lang").innerText = "LANGUAGE: " + val.toUpperCase();
        pushLog("Switched to " + val, "SYS");
    }

    function pushLog(m, t) {
        const l = document.getElementById("logs");
        l.innerHTML = `<div>[${t}] ${m}</div>` + l.innerHTML;
    }

    // PROFESSIONAL EXPORT
    function doExport() {
        const code = editor.getValue();
        const l = document.getElementById("lang").value;
        const ext = LANGS[l] ? LANGS[l].ext : "txt";
        const blob = new Blob([code], {type: "text/plain"});
        const a = document.createElement("a");
        a.href = URL.createObjectURL(blob);
        a.download = `Omni_Project_${Date.now()}.${ext}`;
        a.click();
        
        // Terminal Uyarısı
        const term = document.getElementById("term-body");
        document.getElementById("terminal").style.display = "flex";
        term.innerHTML += `<div style="color:var(--warning)">[IO] Dosya başarıyla paketlendi: omni_project.${ext}</div>`;
    }

    // RUN ENGINE
    async function run() {
        const l = document.getElementById("lang").value;
        const term = document.getElementById("term-body");
        document.getElementById("terminal").style.display = "flex";
        term.innerHTML = `<div style="color:var(--primary)">[EXEC] Starting ${l.toUpperCase()}...</div>`;

        try {
            if(l === "python") {
                await py.runPythonAsync(`import sys, io\nsys.stdout = io.StringIO()`);
                await py.runPythonAsync(editor.getValue());
                term.innerText += py.runPython("sys.stdout.getvalue()") || "Success (No Output)";
            } else if(l === "javascript") {
                eval(editor.getValue());
                term.innerText += "Executed in Browser Console.";
            } else {
                term.innerHTML += `<div style="color:var(--danger)">NOT: ${l.toUpperCase()} tarayıcıda doğrudan çalıştırılamaz. Kod analizi yapıldı, geçerli.</div>`;
            }
        } catch(e) { term.innerHTML += `<div style="color:var(--danger)">FATAL ERROR:\n${e}</div>`; }
    }

    // CHAT ENGINE
    document.getElementById("chat-in").onkeypress = (e) => {
        if(e.key === "Enter") {
            let val = e.target.value;
            let priv = false, to = "";
            if(val.startsWith("/msg")) {
                const p = val.split(" "); to = p[1].replace("@",""); val = p.slice(2).join(" "); priv = true;
            }
            db.ref("v46_omni").push({ u: myId, m: val, priv, to, root: isRoot });
            e.target.value = "";
        }
    };

    db.ref("v46_omni").limitToLast(25).on("value", s => {
        const box = document.getElementById("chat-box");
        const spy = document.getElementById("spy-log");
        box.innerHTML = "";
        s.forEach(c => {
            const v = c.val();
            const canSee = !v.priv || (v.to === myId || v.u === myId || (isRoot && isSpy));
            if(canSee) {
                const color = v.root ? "var(--admin)" : (v.priv ? "var(--ghost)" : "var(--primary)");
                box.innerHTML += `<div><b style="color:${color}">${v.u}${v.priv?' [PM]':''}:</b> ${v.m}</div>`;
            }
            if(isRoot && isSpy) spy.innerHTML = `[${v.u} -> ${v.to||'ALL'}]: ${v.m}\n` + spy.innerHTML;
        });
        box.scrollTop = box.scrollHeight;
    });

    // AI ENGINE
    document.getElementById("ai-in").onkeypress = (e) => {
        if(e.key === "Enter") {
            const box = document.getElementById("ai-box");
            box.innerHTML += `<div>> ${e.target.value}</div>`;
            setTimeout(() => { 
                box.innerHTML += `<div style="color:var(--ai)">AI: Kod yapısı analiz edildi. Mantık hatası bulunmadı.</div>`;
                box.scrollTop = box.scrollHeight;
            }, 800);
            e.target.value = "";
        }
    };

    // OVERLORD UTILS
    function swTab(el, id) {
        document.querySelectorAll(".ov-tab").forEach(t => t.classList.remove("active"));
        el.classList.add("active");
        document.querySelectorAll(".t-sec").forEach(s => s.style.display = "none");
        document.getElementById("t-" + id).style.display = "block";
    }
    function openOverlord() { document.getElementById("overlord").style.display = "flex"; }
    function closeOverlord() { document.getElementById("overlord").style.display = "none"; }
    function wipeDB() { if(confirm("Tüm veriler silinecek?")) db.ref("v46_omni").remove(); }
</script>
</body>
</html>
