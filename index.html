<!DOCTYPE html>
<html lang="tr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="Cache-Control" content="no-cache, no-store, must-revalidate">
    <meta http-equiv="Pragma" content="no-cache">
    <meta http-equiv="Expires" content="0">
    <title>CodEditor | V33 ARCHITECT EDITION</title>
    
    <script src="https://cdn.jsdelivr.net/pyodide/v0.23.4/full/pyodide.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/ace/1.23.0/ace.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/ace/1.23.0/ext-language_tools.min.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.1.3/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.1.3/firebase-database-compat.js"></script>

    <style>
        /* --- [ KATMAN 1: TEMEL Sƒ∞STEM ] --- */
        :root {
            --neon-green: #00ff41;
            --neon-blue: #00d4ff;
            --neon-purple: #bc13fe;
            --warning: #ffcc00;
            --bg-dark: #050505;
            --panel-bg: #0a0a0a;
            --border-dim: #1a1a1a;
            --font-mono: 'Courier New', monospace;
        }

        * { box-sizing: border-box; scrollbar-width: thin; scrollbar-color: var(--neon-green) var(--bg-dark); }
        
        body {
            margin: 0; padding: 0; background: var(--bg-dark); color: #e0e0e0;
            font-family: var(--font-mono); height: 100vh; overflow: hidden;
            display: flex; flex-direction: column;
        }

        /* RGB ANIMASYONLU √áER√áEVE */
        .system-border {
            position: fixed; inset: 0; pointer-events: none; z-index: 9999;
            border: 4px solid transparent;
            border-image: linear-gradient(45deg, #f00, #ff0, #0f0, #0ff, #00f, #f0f) 1;
            animation: hue-rotate 10s linear infinite;
        }
        @keyframes hue-rotate { 100% { filter: hue-rotate(360deg); } }

        /* --- [ KATMAN 2: Gƒ∞Rƒ∞≈û EKRANI (AUTH) ] --- */
        #auth-layer {
            position: fixed; inset: 0; background: #000; z-index: 10000;
            display: flex; flex-direction: column; justify-content: center; align-items: center;
        }
        
        .auth-container {
            width: 600px; background: rgba(10,10,10,0.95); border: 2px solid var(--neon-green);
            padding: 40px; border-radius: 15px; box-shadow: 0 0 50px rgba(0,255,65,0.15);
            text-align: center;
        }

        .system-title { font-size: 32px; color: var(--neon-green); text-shadow: 0 0 10px var(--neon-green); margin-bottom: 20px; font-weight: 900; }
        
        /* SARI KURALLAR KUTUSU */
        .rules-box {
            border: 2px dashed var(--warning); background: rgba(255, 204, 0, 0.05);
            padding: 20px; text-align: left; color: var(--warning); margin-bottom: 25px;
            font-size: 13px; line-height: 1.6;
        }
        .rules-box b { text-decoration: underline; font-size: 14px; }

        .input-field {
            width: 100%; padding: 15px; background: #111; border: 1px solid #333;
            color: var(--neon-green); font-family: inherit; font-weight: bold; margin-bottom: 15px;
            border-radius: 5px; outline: none; transition: 0.3s;
        }
        .input-field:focus { border-color: var(--neon-green); box-shadow: 0 0 15px rgba(0,255,65,0.2); }

        .btn-enter {
            width: 100%; padding: 18px; background: var(--neon-green); color: black;
            font-weight: 900; border: none; cursor: pointer; font-size: 16px;
            text-transform: uppercase; transition: transform 0.2s;
        }
        .btn-enter:hover { transform: scale(1.02); box-shadow: 0 0 20px var(--neon-green); }

        /* --- [ KATMAN 3: ARAY√úZ (UI) ] --- */
        header {
            height: 60px; background: #080808; border-bottom: 1px solid var(--border-dim);
            display: flex; align-items: center; justify-content: space-between; padding: 0 20px;
        }

        .header-brand { font-size: 18px; font-weight: bold; color: var(--neon-green); display: flex; align-items: center; gap: 10px; }
        .status-dot { width: 10px; height: 10px; background: red; border-radius: 50%; box-shadow: 0 0 5px red; transition: 0.5s; }
        .status-dot.online { background: #0f0; box-shadow: 0 0 5px #0f0; }

        .toolbar { display: flex; gap: 10px; }
        .tool-btn {
            background: #111; color: #fff; border: 1px solid #333; padding: 8px 15px;
            cursor: pointer; font-size: 12px; font-weight: bold; font-family: inherit;
        }
        .tool-btn:hover { border-color: var(--neon-green); color: var(--neon-green); }
        .btn-run { background: var(--neon-blue); border-color: var(--neon-blue); color: black; display: none; }
        .btn-dl { color: var(--warning); border-color: var(--warning); }

        /* ANA YERLE≈ûƒ∞M (GRID) */
        #main-workspace {
            display: grid; grid-template-columns: 220px 1fr 350px; flex: 1; overflow: hidden;
        }

        /* SOL PANEL: LOGLAR */
        .panel-left {
            background: #020202; border-right: 1px solid var(--border-dim);
            padding: 10px; font-size: 11px; color: #666; overflow-y: auto;
            display: flex; flex-direction: column; gap: 5px;
        }
        .log-entry { padding-bottom: 5px; border-bottom: 1px solid #080808; }
        .log-time { color: var(--neon-blue); margin-right: 5px; }

        /* ORTA PANEL: EDƒ∞T√ñR */
        #editor-container { position: relative; }
        #ace-editor { width: 100%; height: 100%; font-size: 16px; }

        /* SAƒû PANEL: CHAT & AI */
        .panel-right {
            background: #080808; border-left: 1px solid var(--border-dim);
            display: flex; flex-direction: column;
        }

        /* CHAT B√ñL√úM√ú */
        .chat-section { flex: 2; display: flex; flex-direction: column; border-bottom: 2px solid var(--border-dim); padding: 10px; }
        .chat-display { flex: 1; background: #000; border: 1px solid #222; overflow-y: auto; padding: 10px; margin-bottom: 10px; font-size: 12px; }
        .chat-input-area { display: flex; gap: 5px; }
        .chat-msg-input { flex: 1; background: #111; border: 1px solid #333; color: white; padding: 8px; outline: none; }
        .chat-send-btn { background: var(--neon-green); border: none; padding: 0 15px; font-weight: bold; cursor: pointer; }

        /* AI B√ñL√úM√ú */
        .ai-section { flex: 1; padding: 10px; background: #050010; display: flex; flex-direction: column; }
        .ai-header { color: var(--neon-purple); font-weight: bold; font-size: 12px; margin-bottom: 5px; border-bottom: 1px solid var(--neon-purple); }
        .ai-response { flex: 1; color: #d0aaff; font-size: 11px; font-style: italic; overflow-y: auto; margin-bottom: 5px; }
        .ai-input { background: transparent; border: 1px solid var(--neon-purple); color: white; padding: 5px; width: 100%; }

        /* ALT PANEL: TERMƒ∞NAL & REKLAM */
        .bottom-section { display: flex; flex-direction: column; }

        /* PYTHON TERMƒ∞NALƒ∞ (A√ßƒ±lƒ±r/Kapanƒ±r) */
        #terminal-wrapper {
            height: 200px; background: rgba(0,0,0,0.95); border-top: 2px solid var(--neon-blue);
            display: none; flex-direction: column; position: absolute; bottom: 40px; left: 220px; right: 350px; z-index: 500;
        }
        .term-bar { background: var(--neon-blue); padding: 5px 10px; color: black; font-weight: bold; display: flex; justify-content: space-between; cursor: pointer; }
        .term-content { flex: 1; padding: 15px; color: var(--neon-green); overflow-y: auto; font-family: monospace; }

        /* MARQUEE FOOTER */
        footer {
            height: 40px; background: #000; border-top: 1px solid #222;
            display: flex; align-items: center; overflow: hidden; white-space: nowrap;
        }
        .marquee-text {
            animation: scroll-left 30s linear infinite; font-weight: 900; color: var(--neon-green); font-size: 14px;
        }
        @keyframes scroll-left { 0% { transform: translateX(100%); } 100% { transform: translateX(-100%); } }

        /* REHBER PANELƒ∞ */
        #guide-overlay {
            position: fixed; top: 0; left: -100%; width: 400px; height: 100%;
            background: #0a0a0a; border-right: 3px solid var(--neon-green);
            z-index: 11000; transition: 0.4s ease; padding: 40px;
            box-shadow: 50px 0 100px rgba(0,0,0,0.8);
        }
        #guide-overlay.active { left: 0; }
    </style>
</head>
<body>

<div class="system-border"></div>

<div id="guide-overlay">
    <h2 style="color:var(--neon-green);">Sƒ∞STEM KILAVUZU</h2>
    <hr style="border-color:#333">
    <div style="color:#aaa; font-size:13px; line-height:2;">
        <p><b>1. Kodlama:</b> Python se√ßiliyken "RUN" butonu aktiftir. Diƒüer dillerde sadece renklendirme √ßalƒ±≈üƒ±r.</p>
        <p><b>2. Chat:</b> Saƒü panelden "G√∂nder" butonuna basarak sohbete katƒ±lƒ±n. K√ºf√ºr yasaktƒ±r.</p>
        <p><b>3. AI Asistanƒ±:</b> Mor paneldeki kutuya sorunu yaz, "Enter"a bas.</p>
        <p><b>4. Kayƒ±t:</b> "ƒ∞NDƒ∞R" butonu, se√ßili dile uygun uzantƒ±yƒ± (.py, .cpp, .html) otomatik verir.</p>
        <p><b>5. Terminal:</b> Python √ßƒ±ktƒ±larƒ± alttan a√ßƒ±lan mavi panelde g√∂r√ºn√ºr.</p>
    </div>
    <button onclick="toggleGuide()" class="btn-enter" style="margin-top:20px;">ANLA≈ûILDI</button>
</div>

<div id="auth-layer">
    <div class="auth-container">
        <div class="system-title">V33 ARCHITECT</div>
        
        <div class="rules-box">
            <b style="color:white; display:block; margin-bottom:10px;">[ SARI KURALLAR / YELLOW PROTOCOLS ]</b>
            1. Instagram: <b>@rw_f00t</b> takibi sistem giri≈ü ≈üartƒ±dƒ±r.<br>
            2. Bu platformda "Cache" temizliƒüi otomatiktir.<br>
            3. Chat ve AI paneli birbirinden baƒüƒ±msƒ±z √ßalƒ±≈üƒ±r.<br>
            4. Birden fazla sekmede oturum a√ßabilirsiniz.<br>
            5. Pyodide motoru y√ºklenmeden sistem a√ßƒ±lmaz.
        </div>

        <input type="text" id="username" class="input-field" placeholder="KOD ADINIZ (User ID)">
        <input type="password" id="password" class="input-field" placeholder="Gƒ∞Rƒ∞≈û ANAHTARI (Key)">
        <button class="btn-enter" onclick="bootSystem()">BAƒûLANTIYI BA≈ûLAT</button>
        <div id="boot-status" style="margin-top:10px; font-size:12px; color:#555;">Sistem Bekleniyor...</div>
    </div>
</div>

<header>
    <div class="header-brand">
        <div class="status-dot" id="net-status"></div>
        <span>CODEDITOR <span style="color:white">V33</span></span>
    </div>
    <div class="toolbar">
        <button class="tool-btn" onclick="toggleGuide()">‚ùì KILAVUZ</button>
        <select id="lang-select" class="tool-btn" onchange="changeLanguage()">
            <option value="python">Python 3.11</option>
            <option value="c_cpp">C++ (GCC)</option>
            <option value="csharp">C# (.NET)</option>
            <option value="java">Java</option>
            <option value="javascript">Node.JS</option>
            <option value="html">HTML5</option>
            <option value="php">PHP 8</option>
            <option value="sql">SQL</option>
        </select>
        <button id="btn-run" class="tool-btn btn-run" onclick="executePython()">‚ñ∂ √áALI≈ûTIR</button>
        <button id="btn-dl" class="tool-btn btn-dl" onclick="downloadFile()">üì• ƒ∞NDƒ∞R</button>
    </div>
</header>

<div id="main-workspace">
    <div class="panel-left" id="log-panel">
        <div class="log-entry"><span class="log-time">[SYS]</span> Kernel V33 Initialized.</div>
    </div>

    <div id="editor-container">
        <div id="ace-editor"># V33 ARCHITECT EDITION
# Instagram: @rw_f00t
# Sistem tamamen yenilendi. Chat, AI ve Terminal aktif.

print("Merhaba D√ºnya! V33 Online.")</div>
        
        <div id="terminal-wrapper">
            <div class="term-bar">
                <span>TERMINAL_OUTPUT</span>
                <span onclick="toggleTerminal(false)">[ KAPAT ]</span>
            </div>
            <div id="term-output" class="term-content">...</div>
        </div>
    </div>

    <div class="panel-right">
        <div class="chat-section">
            <div style="color:var(--neon-green); font-weight:bold; margin-bottom:5px;">GENEL SOHBET</div>
            <div id="chat-box" class="chat-display"></div>
            <div class="chat-input-area">
                <input type="text" id="chat-msg" class="chat-msg-input" placeholder="Mesaj...">
                <button class="chat-send-btn" onclick="sendMessage()">></button>
            </div>
        </div>

        <div class="ai-section">
            <div class="ai-header">YAPAY ZEKA ASƒ∞STANI (BETA)</div>
            <div id="ai-response-box" class="ai-response">AI: Merhaba, kodunda takƒ±ldƒ±ƒüƒ±n yeri sorabilirsin.</div>
            <input type="text" id="ai-input" class="ai-input" placeholder="Soru sor ve Enter'a bas..." onkeypress="handleAI(event)">
        </div>
    </div>
</div>

<footer>
    <div class="marquee-text">
        +++ SYSTEM ONLINE +++ INSTAGRAM: @RW_F00T +++ V33 UPDATE COMPLETE +++ PYTHON ENGINE: PYODIDE 0.23 +++ NO-CACHE PROTOCOL ACTIVE +++ ALL SYSTEMS GO +++ SARI KURALLAR GE√áERLƒ∞Dƒ∞R +++
    </div>
</footer>

<script>
    /* --- [ Sƒ∞STEM √áEKƒ∞RDEƒûƒ∞ (JS) ] --- */
    
    // 1. Firebase Ba≈ülatma
    const firebaseConfig = { apiKey: "AIzaSyDpaFcKI6XhYuWCiyZHUFey0T6uqKy8IPA", authDomain: "prem-d18e3.firebaseapp.com", databaseURL: "https://prem-d18e3-default-rtdb.firebaseio.com", projectId: "prem-d18e3", storageBucket: "prem-d18e3.firebasestorage.app", messagingSenderId: "828611092580", appId: "1:828611092580:web:5f8e2c7c501c63a2d73f71" };
    firebase.initializeApp(firebaseConfig);
    const db = firebase.database();

    // 2. Deƒüi≈ükenler
    let pyodide = null;
    let currentUser = "Anonim";
    const editor = ace.edit("ace-editor");
    editor.setTheme("ace/theme/terminal");
    editor.session.setMode("ace/mode/python");
    editor.setOptions({ fontSize: "14px", showPrintMargin: false });

    // 3. Sistem Loglama Fonksiyonu
    function log(msg, type="INFO") {
        const panel = document.getElementById("log-panel");
        const div = document.createElement("div");
        div.className = "log-entry";
        const time = new Date().toLocaleTimeString();
        div.innerHTML = `<span class="log-time">[${time}]</span> <span style="color:${type==='ERR'?'red':'var(--neon-green)'}">${type}:</span> ${msg}`;
        panel.prepend(div);
    }

    // 4. Pyodide Y√ºkleme (Arka Plan)
    async function initPyodide() {
        try {
            log("Python motoru indiriliyor...", "SYS");
            pyodide = await loadPyodide();
            log("Python 3.11 Hazƒ±r.", "OK");
            document.getElementById("btn-run").style.display = "block";
            document.getElementById("boot-status").innerText = "Sistem Hazƒ±r. Giri≈ü Yapabilirsiniz.";
            document.getElementById("boot-status").style.color = "#0f0";
        } catch (e) {
            log("Python y√ºklenemedi!", "ERR");
        }
    }
    initPyodide();

    // 5. Boot / Giri≈ü Sistemi
    function bootSystem() {
        const user = document.getElementById("username").value;
        if (!user) { alert("Kullanƒ±cƒ± adƒ± zorunludur!"); return; }
        
        currentUser = user;
        document.getElementById("boot-status").innerText = "Yetkilendirme Ba≈üarƒ±lƒ±...";
        
        // Sahte Y√ºkleme Efekti
        setTimeout(() => {
            document.getElementById("auth-layer").style.display = "none";
            document.getElementById("net-status").classList.add("online");
            log(`Kullanƒ±cƒ± Giri≈üi: ${currentUser}`, "AUTH");
        }, 1000);
    }

    // 6. Dil ve Edit√∂r Ayarlarƒ±
    const extensions = { python: ".py", c_cpp: ".cpp", csharp: ".cs", java: ".java", javascript: ".js", html: ".html", php: ".php", sql: ".sql" };

    function changeLanguage() {
        const lang = document.getElementById("lang-select").value;
        editor.session.setMode("ace/mode/" + lang);
        
        // Sadece Python'da Run butonu g√∂ster
        const runBtn = document.getElementById("btn-run");
        runBtn.style.display = (lang === 'python' && pyodide) ? 'block' : 'none';
        
        // ƒ∞ndirme butonunu g√ºncelle
        document.getElementById("btn-dl").innerText = `üì• ƒ∞NDƒ∞R (${extensions[lang] || ".txt"})`;
        log(`Dil deƒüi≈ütirildi: ${lang}`, "UI");
    }

    // 7. Python √áalƒ±≈ütƒ±rma
    async function executePython() {
        toggleTerminal(true);
        const outDiv = document.getElementById("term-output");
        outDiv.innerText = ">>> ƒ∞≈üleniyor...\n";
        
        const code = editor.getValue();
        try {
            await pyodide.runPythonAsync(`import sys, io\nsys.stdout = io.StringIO()`);
            await pyodide.runPythonAsync(code);
            const output = pyodide.runPython("sys.stdout.getvalue()");
            outDiv.innerText = output || ">>> ƒ∞≈ülem tamamlandƒ± (√áƒ±ktƒ± yok).";
            log("Kod √ßalƒ±≈ütƒ±rƒ±ldƒ±.", "PY");
        } catch (err) {
            outDiv.innerText = `>>> HATA:\n${err}`;
            log("Kod √ßalƒ±≈ütƒ±rma hatasƒ±.", "ERR");
        }
    }

    function toggleTerminal(show) {
        document.getElementById("terminal-wrapper").style.display = show ? "flex" : "none";
    }

    // 8. Dosya ƒ∞ndirme
    function downloadFile() {
        const lang = document.getElementById("lang-select").value;
        const blob = new Blob([editor.getValue()], {type: "text/plain"});
        const link = document.createElement("a");
        link.href = URL.createObjectURL(blob);
        link.download = `proje_${Date.now()}${extensions[lang]}`;
        link.click();
        log("Dosya indirildi.", "IO");
    }

    // 9. Chat Sistemi
    function sendMessage() {
        const msgInput = document.getElementById("chat-msg");
        const msg = msgInput.value.trim();
        if (msg) {
            db.ref("global_chat").push({ user: currentUser, text: msg, time: Date.now() });
            msgInput.value = "";
        }
    }

    // Chat Dinleyici
    db.ref("global_chat").limitToLast(15).on("value", snapshot => {
        const chatBox = document.getElementById("chat-box");
        chatBox.innerHTML = "";
        snapshot.forEach(child => {
            const data = child.val();
            const time = new Date(data.time).getHours() + ":" + new Date(data.time).getMinutes();
            chatBox.innerHTML += `<div style="margin-bottom:5px;">
                <span style="color:#555; font-size:10px;">${time}</span> 
                <b style="color:var(--neon-green)">${data.user}:</b> ${data.text}
            </div>`;
        });
        chatBox.scrollTop = chatBox.scrollHeight;
    });

    // 10. AI Sim√ºlasyonu
    function handleAI(e) {
        if (e.key === 'Enter') {
            const input = document.getElementById("ai-input");
            const box = document.getElementById("ai-response-box");
            const question = input.value;
            if(!question) return;

            box.innerHTML += `<div style="color:white; margin-top:5px;">> ${question}</div>`;
            input.value = "";
            box.innerHTML += `<div style="color:var(--neon-purple);">AI Yazƒ±yor...</div>`;
            box.scrollTop = box.scrollHeight;

            setTimeout(() => {
                // Son mesajƒ± 'AI Yazƒ±yor...' silmek yerine ekleyelim
                let reply = "AI: Bunu ≈üu an yapamƒ±yorum.";
                if(question.includes("hata")) reply = "AI: Kodundaki girintileri (indentation) kontrol et.";
                else if(question.includes("python")) reply = "AI: Python 3.11 motoru aktif.";
                else if(question.includes("merhaba")) reply = "AI: Merhaba, nasƒ±l yardƒ±m edebilirim?";
                
                box.lastElementChild.innerHTML = reply;
                box.scrollTop = box.scrollHeight;
                log("AI Yanƒ±tladƒ±.", "AI");
            }, 1200);
        }
    }

    // 11. Kƒ±lavuz Kontrol√º
    function toggleGuide() {
        document.getElementById("guide-overlay").classList.toggle("active");
    }
</script>
</body>
</html>
